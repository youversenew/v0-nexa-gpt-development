{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/KOMPYUTER_01/v0-nexa-gpt-development/contexts/chat-context.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport {\r\n  createContext,\r\n  useContext,\r\n  useState,\r\n  useEffect,\r\n  type ReactNode,\r\n  useCallback,\r\n  useMemo,\r\n} from \"react\";\r\nimport { toast } from \"sonner\";\r\nimport type { Message, Conversation, Module } from \"@/lib/types\";\r\nimport { getSupabaseBrowserClient } from \"@/lib/supabase/client\";\r\nimport { useAuth } from \"@/contexts/auth-context\";\r\n\r\ntype ModuleSlug = \"nexagpt\" | \"agro\" | \"code\" | \"weather\" | \"health\";\r\n\r\ninterface ChatContextType {\r\n  modules: Module[];\r\n  conversations: Conversation[];\r\n  currentConversation: Conversation | null;\r\n  messages: Message[];\r\n  isLoading: boolean;\r\n  isStreaming: boolean;\r\n  activeModule: ModuleSlug;\r\n  setActiveModule: (module: ModuleSlug) => void;\r\n  sendMessage: (content: string, images?: string[]) => Promise<void>;\r\n  createNewConversation: (moduleSlug?: ModuleSlug) => Promise<void>;\r\n  selectConversation: (id: string) => Promise<void>;\r\n  deleteConversation: (id: string) => Promise<void>;\r\n  renameConversation: (id: string, title: string) => Promise<void>;\r\n  clearAllConversations: () => Promise<void>;\r\n  setIsLoading: (loading: boolean) => void;\r\n  goHome: () => void;\r\n  downloadChatHistory: (conversationId: string) => Promise<void>;\r\n}\r\n\r\nconst ChatContext = createContext<ChatContextType | undefined>(undefined);\r\n\r\n// Simple UUID generator fallback\r\nfunction uuidv4() {\r\n  if (typeof crypto !== \"undefined\" && crypto.randomUUID) {\r\n    return crypto.randomUUID();\r\n  }\r\n  return \"10000000-1000-4000-8000-100000000000\".replace(/[018]/g, (c: any) =>\r\n    (\r\n      c ^\r\n      (crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (c / 4)))\r\n    ).toString(16)\r\n  );\r\n}\r\n\r\nexport function ChatProvider({ children }: { children: ReactNode }) {\r\n  const [modules, setModules] = useState<Module[]>([]);\r\n  const [conversations, setConversations] = useState<Conversation[]>([]);\r\n  const [currentConversation, setCurrentConversation] = useState<Conversation | null>(null);\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isStreaming, setIsStreaming] = useState(false);\r\n  const [activeModule, setActiveModule] = useState<ModuleSlug>(\"nexagpt\");\r\n\r\n  // Auth contextdan isLoadingni ham olamiz\r\n  const { user, isLoading: isAuthLoading } = useAuth();\r\n  const supabase = useMemo(() => getSupabaseBrowserClient(), []);\r\n\r\n  // Load modules\r\n  useEffect(() => {\r\n    const loadModules = async () => {\r\n      const { data } = await supabase\r\n        .from(\"modules\")\r\n        .select(\"*\")\r\n        .eq(\"is_active\", true)\r\n        .order(\"sort_order\");\r\n      if (data) setModules(data);\r\n    };\r\n    loadModules();\r\n  }, [supabase]);\r\n\r\n  // Load conversations (User yuklangandan keyingina ishlaydi)\r\n  useEffect(() => {\r\n    if (isAuthLoading || !user) return; // User aniq bo'lmaguncha kutamiz\r\n\r\n    const loadConversations = async () => {\r\n      const { data } = await supabase\r\n        .from(\"conversations\")\r\n        .select(\"*\")\r\n        .eq(\"user_id\", user.id)\r\n        .order(\"updated_at\", { ascending: false });\r\n      if (data) setConversations(data);\r\n    };\r\n    loadConversations();\r\n  }, [user, isAuthLoading, supabase]);\r\n\r\n  // Load messages for current conversation\r\n  useEffect(() => {\r\n    if (!currentConversation) {\r\n      setMessages([]);\r\n      return;\r\n    }\r\n    const loadMessages = async () => {\r\n      const { data } = await supabase\r\n        .from(\"messages\")\r\n        .select(\"*\")\r\n        .eq(\"conversation_id\", currentConversation.id)\r\n        .order(\"created_at\");\r\n      if (data) setMessages(data);\r\n    };\r\n    loadMessages();\r\n  }, [currentConversation, supabase]);\r\n\r\n  const goHome = useCallback(() => {\r\n    setCurrentConversation(null);\r\n    setMessages([]);\r\n  }, []);\r\n\r\n  const createNewConversation = useCallback(\r\n    async (moduleSlug?: ModuleSlug) => {\r\n      const slug = moduleSlug || activeModule;\r\n      setActiveModule(slug);\r\n      goHome();\r\n    },\r\n    [activeModule, goHome]\r\n  );\r\n\r\n  const selectConversation = useCallback(\r\n    async (id: string) => {\r\n      const conversation = conversations.find((c) => c.id === id);\r\n      if (conversation) {\r\n        setCurrentConversation(conversation);\r\n        if (conversation.module_slug) {\r\n          setActiveModule(conversation.module_slug as ModuleSlug);\r\n        }\r\n      }\r\n    },\r\n    [conversations]\r\n  );\r\n\r\n  const deleteConversation = useCallback(\r\n    async (id: string) => {\r\n      await supabase.from(\"conversations\").delete().eq(\"id\", id);\r\n      setConversations((prev) => prev.filter((c) => c.id !== id));\r\n      if (currentConversation?.id === id) {\r\n        goHome();\r\n      }\r\n    },\r\n    [currentConversation, supabase, goHome]\r\n  );\r\n\r\n  const renameConversation = useCallback(\r\n    async (id: string, title: string) => {\r\n      await supabase\r\n        .from(\"conversations\")\r\n        .update({ custom_title: title, title })\r\n        .eq(\"id\", id);\r\n      setConversations((prev) =>\r\n        prev.map((c) =>\r\n          c.id === id ? { ...c, title, custom_title: title } : c\r\n        )\r\n      );\r\n      if (currentConversation?.id === id) {\r\n        setCurrentConversation((prev) =>\r\n          prev ? { ...prev, title, custom_title: title } : null\r\n        );\r\n      }\r\n    },\r\n    [currentConversation, supabase]\r\n  );\r\n\r\n  const clearAllConversations = useCallback(async () => {\r\n    if (!user) return;\r\n    await supabase.from(\"conversations\").delete().eq(\"user_id\", user.id);\r\n    setConversations([]);\r\n    goHome();\r\n    goHome();\r\n  }, [user, supabase, goHome]);\r\n\r\n  const downloadChatHistory = useCallback(async (conversationId: string) => {\r\n    try {\r\n      const { data: messages } = await supabase\r\n        .from(\"messages\")\r\n        .select(\"*\")\r\n        .eq(\"conversation_id\", conversationId)\r\n        .order(\"created_at\");\r\n\r\n      if (!messages || messages.length === 0) {\r\n        toast.error(\"No messages to download\");\r\n        return;\r\n      }\r\n\r\n      const conversation = conversations.find(c => c.id === conversationId);\r\n      const title = conversation?.custom_title || conversation?.title || \"chat-history\";\r\n\r\n      const content = messages.map((m: any) => `[${new Date(m.created_at).toLocaleString()}] ${m.role.toUpperCase()}:\\n${m.content}\\n`).join(\"\\n---\\n\\n\");\r\n\r\n      const blob = new Blob([content], { type: \"text/plain\" });\r\n      const url = URL.createObjectURL(blob);\r\n      const a = document.createElement(\"a\");\r\n      a.href = url;\r\n      a.download = `${title.replace(/[^a-z0-9]/gi, '_').toLowerCase()}.txt`;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      document.body.removeChild(a);\r\n      URL.revokeObjectURL(url);\r\n\r\n      toast.success(\"Chat history downloaded\");\r\n    } catch (error) {\r\n      console.error(\"Download error:\", error);\r\n      toast.error(\"Failed to download chat history\");\r\n    }\r\n  }, [supabase, conversations]);\r\n\r\n  const sendMessage = useCallback(\r\n    async (content: string, images?: string[]) => {\r\n      if (!user) {\r\n        toast.error(\"Please login to send messages\")\r\n        return;\r\n      }\r\n\r\n      let conversationId = currentConversation?.id;\r\n\r\n      if (!conversationId) {\r\n        const { data } = await supabase\r\n          .from(\"conversations\")\r\n          .insert({\r\n            user_id: user.id,\r\n            module_slug: activeModule,\r\n            title: \"New conversation\",\r\n          })\r\n          .select()\r\n          .single();\r\n\r\n        if (data) {\r\n          conversationId = data.id;\r\n          setConversations((prev) => [data, ...prev]);\r\n          setCurrentConversation(data);\r\n        } else {\r\n          toast.error(\"Failed to create new conversation\")\r\n          return;\r\n        }\r\n      }\r\n\r\n      const userMessage: Message = {\r\n        id: uuidv4(),\r\n        conversation_id: conversationId!,\r\n        role: \"user\",\r\n        content,\r\n        metadata: images ? { images } : undefined,\r\n        created_at: new Date().toISOString(),\r\n      };\r\n\r\n      setMessages((prev) => [...prev, userMessage]);\r\n\r\n      await supabase.from(\"messages\").insert({\r\n        conversation_id: conversationId,\r\n        role: \"user\",\r\n        content,\r\n        metadata: images ? { images } : {},\r\n      });\r\n\r\n      if (messages.length === 0) {\r\n        try {\r\n          const titleResponse = await fetch(\"/api/generate-title\", {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({ content }),\r\n          });\r\n          const { title } = await titleResponse.json();\r\n\r\n          await supabase\r\n            .from(\"conversations\")\r\n            .update({ title })\r\n            .eq(\"id\", conversationId);\r\n\r\n          setConversations((prev) =>\r\n            prev.map((c) => (c.id === conversationId ? { ...c, title } : c))\r\n          );\r\n          setCurrentConversation((prev) =>\r\n            prev ? { ...prev, title } : null\r\n          );\r\n        } catch {\r\n          const fallbackTitle =\r\n            content.slice(0, 30) + (content.length > 30 ? \"...\" : \"\");\r\n          await supabase\r\n            .from(\"conversations\")\r\n            .update({ title: fallbackTitle })\r\n            .eq(\"id\", conversationId);\r\n\r\n          setConversations((prev) =>\r\n            prev.map((c) => (c.id === conversationId ? { ...c, title: fallbackTitle } : c))\r\n          );\r\n          setCurrentConversation((prev) =>\r\n            prev ? { ...prev, title: fallbackTitle } : null\r\n          );\r\n        }\r\n      }\r\n\r\n      setIsStreaming(true);\r\n      const currentModule = modules.find((m) => m.slug === activeModule);\r\n\r\n      try {\r\n        const useGroq = activeModule === \"code\";\r\n\r\n        const response = await fetch(\"/api/chat\", {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify({\r\n            messages: [...messages, userMessage].map((m) => ({\r\n              role: m.role,\r\n              content: m.content,\r\n            })),\r\n            module: activeModule,\r\n            systemPrompt: currentModule?.system_prompt,\r\n            images,\r\n            useGroq,\r\n          }),\r\n        });\r\n\r\n        if (!response.ok) throw new Error(\"Failed to get response\");\r\n\r\n        const reader = response.body?.getReader();\r\n        const decoder = new TextDecoder();\r\n\r\n        const assistantMessage: Message = {\r\n          id: uuidv4(),\r\n          conversation_id: conversationId!,\r\n          role: \"assistant\",\r\n          content: \"\",\r\n          created_at: new Date().toISOString(),\r\n        };\r\n\r\n        setMessages((prev) => [...prev, assistantMessage]);\r\n\r\n        let fullContent = \"\";\r\n\r\n        while (reader) {\r\n          const { done, value } = await reader.read();\r\n          if (done) break;\r\n\r\n          const chunk = decoder.decode(value);\r\n          const lines = chunk.split(\"\\n\");\r\n\r\n          for (const line of lines) {\r\n            if (line.startsWith(\"data: \")) {\r\n              const data = line.slice(6);\r\n              if (data === \"[DONE]\") continue;\r\n\r\n              try {\r\n                const parsed = JSON.parse(data);\r\n                if (parsed.content) {\r\n                  fullContent += parsed.content;\r\n                  setMessages((prev) =>\r\n                    prev.map((m) =>\r\n                      m.id === assistantMessage.id\r\n                        ? { ...m, content: fullContent }\r\n                        : m\r\n                    )\r\n                  );\r\n                }\r\n              } catch {\r\n                // Skip invalid JSON\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        await supabase.from(\"messages\").insert({\r\n          conversation_id: conversationId,\r\n          role: \"assistant\",\r\n          content: fullContent,\r\n        });\r\n      } catch (error) {\r\n        console.error(\"[v0] Chat error:\", error);\r\n        toast.error(\"Failed to send message: \" + (error as Error).message)\r\n        setMessages((prev) => [\r\n          ...prev,\r\n          {\r\n            id: uuidv4(),\r\n            conversation_id: conversationId!,\r\n            role: \"assistant\",\r\n            content:\r\n              \"Kechirasiz, xatolik yuz berdi. Iltimos qaytadan urinib ko'ring.\",\r\n            created_at: new Date().toISOString(),\r\n          },\r\n        ]);\r\n      } finally {\r\n        setIsStreaming(false);\r\n      }\r\n    },\r\n    [user, currentConversation, activeModule, messages, modules, supabase]\r\n  );\r\n\r\n  return (\r\n    <ChatContext.Provider\r\n      value={{\r\n        modules,\r\n        conversations,\r\n        currentConversation,\r\n        messages,\r\n        isLoading,\r\n        isStreaming,\r\n        activeModule,\r\n        setActiveModule,\r\n        sendMessage,\r\n        createNewConversation,\r\n        selectConversation,\r\n        deleteConversation,\r\n        renameConversation,\r\n        clearAllConversations,\r\n        setIsLoading,\r\n        goHome,\r\n        downloadChatHistory,\r\n      }}\r\n    >\r\n      {children}\r\n    </ChatContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useChat() {\r\n  const context = useContext(ChatContext);\r\n  if (!context) {\r\n    throw new Error(\"useChat must be used within a ChatProvider\");\r\n  }\r\n  return context;\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 480, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/KOMPYUTER_01/v0-nexa-gpt-development/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\r\nimport { twMerge } from 'tailwind-merge'\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 498, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/KOMPYUTER_01/v0-nexa-gpt-development/components/sidebar.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport type React from \"react\"\r\nimport { useState } from \"react\"\r\nimport { useTheme } from \"@/contexts/theme-context\"\r\nimport { useChat } from \"@/contexts/chat-context\"\r\nimport { useAuth } from \"@/contexts/auth-context\"\r\nimport { useLanguage } from \"@/contexts/language-context\"\r\nimport {\r\n  Plus,\r\n  Sun,\r\n  Moon,\r\n  User,\r\n  HelpCircle,\r\n  LogOut,\r\n  ChevronRight,\r\n  ChevronDown,\r\n  Settings,\r\n  Search,\r\n  MessageSquare,\r\n  Trash2,\r\n  Menu,\r\n  X,\r\n  Leaf,\r\n  Code,\r\n  Cloud,\r\n  Heart,\r\n  Bot,\r\n  Edit2,\r\n  Globe,\r\n  Download,\r\n} from \"lucide-react\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { useRouter } from \"next/navigation\"\r\n\r\nconst iconMap: Record<string, React.ElementType> = {\r\n  bot: Bot,\r\n  leaf: Leaf,\r\n  code: Code,\r\n  cloud: Cloud,\r\n  heart: Heart,\r\n}\r\n\r\ninterface SidebarProps {\r\n  isOpen: boolean\r\n  onToggle: () => void\r\n  onOpenSearch: () => void\r\n  onOpenSettings: () => void\r\n  onOpenAccount: () => void\r\n}\r\n\r\nexport function Sidebar({ isOpen, onToggle, onOpenSearch, onOpenSettings, onOpenAccount }: SidebarProps) {\r\n  const { theme, toggleTheme } = useTheme()\r\n  const { language, setLanguage, t } = useLanguage()\r\n  const {\r\n    modules,\r\n    conversations,\r\n    currentConversation,\r\n    createNewConversation,\r\n    selectConversation,\r\n    deleteConversation,\r\n    renameConversation,\r\n    downloadChatHistory,\r\n  } = useChat()\r\n  const { signOut, profile } = useAuth()\r\n  const router = useRouter()\r\n  const [moreModulesOpen, setMoreModulesOpen] = useState(false)\r\n  const [hoveredConversation, setHoveredConversation] = useState<string | null>(null)\r\n  const [editingConversation, setEditingConversation] = useState<string | null>(null)\r\n  const [editTitle, setEditTitle] = useState(\"\")\r\n  const [deleteConfirm, setDeleteConfirm] = useState<string | null>(null)\r\n\r\n  const mainModules = modules.slice(0, 3)\r\n  const moreModules = modules.slice(3)\r\n\r\n  const handleSignOut = async () => {\r\n    await signOut()\r\n    router.push(\"/login\")\r\n  }\r\n\r\n  const handleNewChat = () => {\r\n    createNewConversation()\r\n  }\r\n\r\n  const startRename = (id: string, currentTitle: string) => {\r\n    setEditingConversation(id)\r\n    setEditTitle(currentTitle)\r\n  }\r\n\r\n  const saveRename = async (id: string) => {\r\n    if (editTitle.trim()) {\r\n      await renameConversation(id, editTitle.trim())\r\n    }\r\n    setEditingConversation(null)\r\n  }\r\n\r\n  const confirmDelete = async (id: string) => {\r\n    await deleteConversation(id)\r\n    setDeleteConfirm(null)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* Mobile overlay */}\r\n      {isOpen && <div className=\"fixed inset-0 z-40 bg-black/50 lg:hidden\" onClick={onToggle} />}\r\n\r\n      {/* Sidebar */}\r\n      <aside\r\n        className={cn(\r\n          \"fixed inset-y-0 left-0 z-50 flex h-full w-64 flex-col bg-sidebar text-sidebar-foreground border-r border-sidebar-border transition-transform duration-300 lg:static lg:translate-x-0\",\r\n          isOpen ? \"translate-x-0\" : \"-translate-x-full\",\r\n        )}\r\n      >\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-3 lg:hidden\">\r\n          <span className=\"font-semibold\">NexaGPT</span>\r\n          <button onClick={onToggle} className=\"rounded-lg p-2 hover:bg-sidebar-accent\">\r\n            <X className=\"h-5 w-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* New Chat Button */}\r\n        <div className=\"p-3\">\r\n          <button\r\n            onClick={handleNewChat}\r\n            className=\"flex w-full items-center justify-center gap-2 rounded-lg bg-[#8B7EC8] px-4 py-2.5 text-sm font-medium text-white transition-colors hover:bg-[#7A6DB7]\"\r\n          >\r\n            <Plus className=\"h-4 w-4\" />\r\n            {t(\"newChat\")}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Module Shortcuts */}\r\n        <div className=\"flex-1 overflow-y-auto px-3\">\r\n          {/* Main AI Modules */}\r\n          <div className=\"space-y-1\">\r\n            {mainModules.map((module) => {\r\n              const Icon = iconMap[module.icon] || Bot\r\n              return (\r\n                <button\r\n                  key={module.slug}\r\n                  onClick={() =>\r\n                    createNewConversation(module.slug as \"nexagpt\" | \"agro\" | \"code\" | \"weather\" | \"health\")\r\n                  }\r\n                  className=\"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-sm transition-colors hover:bg-sidebar-accent\"\r\n                >\r\n                  <div\r\n                    className=\"flex h-8 w-8 items-center justify-center rounded-full\"\r\n                    style={{ backgroundColor: module.theme_color }}\r\n                  >\r\n                    <Icon className=\"h-4 w-4 text-white\" />\r\n                  </div>\r\n                  <span>{module.name}</span>\r\n                </button>\r\n              )\r\n            })}\r\n          </div>\r\n\r\n          {/* More Modules Dropdown */}\r\n          {moreModules.length > 0 && (\r\n            <div className=\"mt-2\">\r\n              <button\r\n                onClick={() => setMoreModulesOpen(!moreModulesOpen)}\r\n                className=\"flex w-full items-center justify-between rounded-lg bg-sidebar-accent px-3 py-2 text-sm font-medium transition-colors hover:bg-sidebar-accent/80\"\r\n              >\r\n                <span>{t(\"moreModules\")}</span>\r\n                {moreModulesOpen ? <ChevronDown className=\"h-4 w-4\" /> : <ChevronRight className=\"h-4 w-4\" />}\r\n              </button>\r\n\r\n              {moreModulesOpen && (\r\n                <div className=\"mt-1 space-y-1 rounded-lg bg-sidebar-accent/50 p-2\">\r\n                  {moreModules.map((module) => (\r\n                    <button\r\n                      key={module.slug}\r\n                      onClick={() =>\r\n                        createNewConversation(module.slug as \"nexagpt\" | \"agro\" | \"code\" | \"weather\" | \"health\")\r\n                      }\r\n                      className=\"flex w-full items-center justify-between rounded-md px-3 py-2 text-sm transition-colors hover:bg-sidebar-accent\"\r\n                    >\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span className=\"text-muted-foreground\">{\"{ }\"}</span>\r\n                        <span>{module.name}</span>\r\n                      </div>\r\n                      <ChevronRight className=\"h-4 w-4 text-muted-foreground\" />\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Conversations List */}\r\n          {conversations.length > 0 && (\r\n            <div className=\"mt-4 space-y-1\">\r\n              <p className=\"px-3 text-xs font-medium text-muted-foreground\">{t(\"recent\")}</p>\r\n              {conversations.slice(0, 15).map((conversation) => (\r\n                <div\r\n                  key={conversation.id}\r\n                  className=\"group relative\"\r\n                  onMouseEnter={() => setHoveredConversation(conversation.id)}\r\n                  onMouseLeave={() => setHoveredConversation(null)}\r\n                >\r\n                  {editingConversation === conversation.id ? (\r\n                    <div className=\"flex items-center gap-1 px-2 py-1\">\r\n                      <input\r\n                        type=\"text\"\r\n                        value={editTitle}\r\n                        onChange={(e) => setEditTitle(e.target.value)}\r\n                        onKeyDown={(e) => {\r\n                          if (e.key === \"Enter\") saveRename(conversation.id)\r\n                          if (e.key === \"Escape\") setEditingConversation(null)\r\n                        }}\r\n                        onBlur={() => saveRename(conversation.id)}\r\n                        className=\"flex-1 rounded bg-sidebar-accent px-2 py-1 text-sm outline-none focus:ring-1 focus:ring-ring\"\r\n                        autoFocus\r\n                      />\r\n                    </div>\r\n                  ) : (\r\n                    <button\r\n                      onClick={() => selectConversation(conversation.id)}\r\n                      className={cn(\r\n                        \"flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm text-left transition-colors hover:bg-sidebar-accent\",\r\n                        currentConversation?.id === conversation.id && \"bg-sidebar-accent\",\r\n                      )}\r\n                    >\r\n                      <MessageSquare className=\"h-4 w-4 shrink-0 text-muted-foreground\" />\r\n                      <span className=\"truncate flex-1\">{conversation.custom_title || conversation.title}</span>\r\n                    </button>\r\n                  )}\r\n\r\n                  {hoveredConversation === conversation.id && editingConversation !== conversation.id && (\r\n                    <div className=\"absolute right-2 top-1/2 -translate-y-1/2 flex gap-1\">\r\n                      <button\r\n                        onClick={(e) => {\r\n                          e.stopPropagation()\r\n                          startRename(conversation.id, conversation.custom_title || conversation.title)\r\n                        }}\r\n                        className=\"rounded p-1 text-muted-foreground hover:bg-muted hover:text-foreground\"\r\n                        title={t(\"rename\")}\r\n                      >\r\n                        <Edit2 className=\"h-3.5 w-3.5\" />\r\n                      </button>\r\n                      <button\r\n                        onClick={(e) => {\r\n                          e.stopPropagation()\r\n                          downloadChatHistory(conversation.id)\r\n                        }}\r\n                        className=\"rounded p-1 text-muted-foreground hover:bg-muted hover:text-foreground\"\r\n                        title=\"Download history\"\r\n                      >\r\n                        <Download className=\"h-3.5 w-3.5\" />\r\n                      </button>\r\n                      <button\r\n                        onClick={(e) => {\r\n                          e.stopPropagation()\r\n                          setDeleteConfirm(conversation.id)\r\n                        }}\r\n                        className=\"rounded p-1 text-muted-foreground hover:bg-destructive/10 hover:text-destructive\"\r\n                        title={t(\"delete\")}\r\n                      >\r\n                        <Trash2 className=\"h-3.5 w-3.5\" />\r\n                      </button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Bottom Actions */}\r\n        <div className=\"border-t border-sidebar-border p-3 space-y-1\">\r\n          <button\r\n            onClick={onOpenSearch}\r\n            className=\"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-sm transition-colors hover:bg-sidebar-accent\"\r\n          >\r\n            <Search className=\"h-4 w-4\" />\r\n            <span className=\"flex-1 text-left\">{t(\"search\")}</span>\r\n            <kbd className=\"hidden rounded bg-muted px-1.5 py-0.5 text-xs text-muted-foreground sm:inline\">âŒ˜K</kbd>\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => setLanguage(language === \"uz\" ? \"en\" : \"uz\")}\r\n            className=\"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-sm transition-colors hover:bg-sidebar-accent\"\r\n          >\r\n            <Globe className=\"h-4 w-4\" />\r\n            <span className=\"flex-1 text-left\">{language === \"uz\" ? \"O'zbekcha\" : \"English\"}</span>\r\n          </button>\r\n\r\n          <button\r\n            onClick={toggleTheme}\r\n            className=\"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-sm transition-colors hover:bg-sidebar-accent\"\r\n          >\r\n            {theme === \"light\" ? (\r\n              <>\r\n                <Moon className=\"h-4 w-4\" />\r\n                {t(\"darkMode\")}\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Sun className=\"h-4 w-4\" />\r\n                {t(\"lightMode\")}\r\n              </>\r\n            )}\r\n          </button>\r\n\r\n          <button\r\n            onClick={onOpenAccount}\r\n            className=\"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-sm transition-colors hover:bg-sidebar-accent\"\r\n          >\r\n            <User className=\"h-4 w-4\" />\r\n            <span className=\"flex-1 text-left truncate\">{profile?.full_name || t(\"account\")}</span>\r\n          </button>\r\n\r\n          <button\r\n            onClick={onOpenSettings}\r\n            className=\"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-sm transition-colors hover:bg-sidebar-accent\"\r\n          >\r\n            <Settings className=\"h-4 w-4\" />\r\n            {t(\"settings\")}\r\n          </button>\r\n\r\n          <button className=\"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-sm transition-colors hover:bg-sidebar-accent\">\r\n            <HelpCircle className=\"h-4 w-4\" />\r\n            Updates & FAQ\r\n          </button>\r\n\r\n          <button\r\n            onClick={handleSignOut}\r\n            className=\"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-sm transition-colors hover:bg-sidebar-accent text-destructive\"\r\n          >\r\n            <LogOut className=\"h-4 w-4\" />\r\n            {t(\"logout\")}\r\n          </button>\r\n        </div>\r\n      </aside>\r\n\r\n      {/* Mobile menu button */}\r\n      {!isOpen && (\r\n        <button onClick={onToggle} className=\"fixed left-4 top-4 z-30 rounded-lg bg-background p-2 shadow-md lg:hidden\">\r\n          <Menu className=\"h-5 w-5\" />\r\n        </button>\r\n      )}\r\n\r\n      {deleteConfirm && (\r\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center bg-black/50\">\r\n          <div className=\"bg-background rounded-lg p-6 max-w-sm mx-4 shadow-xl border border-border\">\r\n            <h3 className=\"font-semibold mb-2\">{t(\"delete\")}</h3>\r\n            <p className=\"text-sm text-muted-foreground mb-4\">{t(\"deleteWarning\")}</p>\r\n            <div className=\"flex gap-2 justify-end\">\r\n              <button\r\n                onClick={() => setDeleteConfirm(null)}\r\n                className=\"px-4 py-2 text-sm rounded-lg hover:bg-muted transition-colors\"\r\n              >\r\n                {t(\"cancel\")}\r\n              </button>\r\n              <button\r\n                onClick={() => confirmDelete(deleteConfirm)}\r\n                className=\"px-4 py-2 text-sm rounded-lg bg-destructive text-destructive-foreground hover:bg-destructive/90 transition-colors\"\r\n              >\r\n                {t(\"delete\")}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1214, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/KOMPYUTER_01/v0-nexa-gpt-development/components/welcome-screen.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useChat } from \"@/contexts/chat-context\"\r\nimport type { Module } from \"@/lib/types\"\r\nimport { MessageSquare, Sparkles, AlertCircle } from \"lucide-react\"\r\n\r\nconst examples = [\r\n  '\"Explain quantum computing in simple terms\"',\r\n  '\"Got any creative ideas for a 10 year old\\'s birthday?\"',\r\n  '\"How do I make an HTTP request in Javascript?\"',\r\n]\r\n\r\nconst capabilities = [\r\n  \"Remembers what user said earlier in the conversation.\",\r\n  \"Allows user to provide follow-up corrections.\",\r\n  \"Trained to decline inappropriate requests.\",\r\n]\r\n\r\nconst limitations = [\r\n  \"May occasionally generate incorrect information.\",\r\n  \"May occasionally produce harmful instructions or biased content.\",\r\n  \"Limited knowledge of world and events after 2021.\",\r\n]\r\n\r\ninterface WelcomeScreenProps {\r\n  module?: Module\r\n}\r\n\r\nexport function WelcomeScreen({ module }: WelcomeScreenProps) {\r\n  const { sendMessage } = useChat()\r\n\r\n  const handleExampleClick = (example: string) => {\r\n    const cleanExample = example.replace(/^\"|\"$/g, \"\")\r\n    sendMessage(cleanExample)\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-1 flex-col items-center justify-center px-4 py-8 min-h-[calc(100vh-180px)]\">\r\n      <h1 className=\"mb-8 text-4xl font-bold text-balance text-center\">{module?.name || \"NexaGPT\"}</h1>\r\n\r\n      <div className=\"grid w-full max-w-4xl gap-6 md:grid-cols-3\">\r\n        {/* Examples */}\r\n        <div className=\"space-y-3\">\r\n          <div className=\"flex flex-col items-center gap-2\">\r\n            <MessageSquare className=\"h-6 w-6\" />\r\n            <h2 className=\"font-semibold\">Examples</h2>\r\n          </div>\r\n          <div className=\"space-y-2\">\r\n            {examples.map((example, i) => (\r\n              <button\r\n                key={i}\r\n                onClick={() => handleExampleClick(example)}\r\n                className=\"w-full rounded-lg bg-muted px-4 py-3 text-left text-sm transition-colors hover:bg-muted/80\"\r\n              >\r\n                {example}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Capabilities */}\r\n        <div className=\"space-y-3\">\r\n          <div className=\"flex flex-col items-center gap-2\">\r\n            <Sparkles className=\"h-6 w-6\" />\r\n            <h2 className=\"font-semibold\">Capabilities</h2>\r\n          </div>\r\n          <div className=\"space-y-2\">\r\n            {capabilities.map((capability, i) => (\r\n              <div key={i} className=\"rounded-lg bg-muted px-4 py-3 text-sm\">\r\n                {capability}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Limitations */}\r\n        <div className=\"space-y-3\">\r\n          <div className=\"flex flex-col items-center gap-2\">\r\n            <AlertCircle className=\"h-6 w-6\" />\r\n            <h2 className=\"font-semibold\">Limitations</h2>\r\n          </div>\r\n          <div className=\"space-y-2\">\r\n            {limitations.map((limitation, i) => (\r\n              <div key={i} className=\"rounded-lg bg-muted px-4 py-3 text-sm\">\r\n                {limitation}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AAAA;AAAA;;;AAJA;;;AAMA,MAAM,WAAW;IACf;IACA;IACA;CACD;AAED,MAAM,eAAe;IACnB;IACA;IACA;CACD;AAED,MAAM,cAAc;IAClB;IACA;IACA;CACD;AAMM,SAAS,cAAc,EAAE,MAAM,EAAsB;;IAC1D,MAAM,EAAE,WAAW,EAAE,GAAG,IAAA,0IAAO;IAE/B,MAAM,qBAAqB,CAAC;QAC1B,MAAM,eAAe,QAAQ,OAAO,CAAC,UAAU;QAC/C,YAAY;IACd;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAAoD,QAAQ,QAAQ;;;;;;0BAElF,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC,4OAAa;wCAAC,WAAU;;;;;;kDACzB,6LAAC;wCAAG,WAAU;kDAAgB;;;;;;;;;;;;0CAEhC,6LAAC;gCAAI,WAAU;0CACZ,SAAS,GAAG,CAAC,CAAC,SAAS,kBACtB,6LAAC;wCAEC,SAAS,IAAM,mBAAmB;wCAClC,WAAU;kDAET;uCAJI;;;;;;;;;;;;;;;;kCAWb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC,yNAAQ;wCAAC,WAAU;;;;;;kDACpB,6LAAC;wCAAG,WAAU;kDAAgB;;;;;;;;;;;;0CAEhC,6LAAC;gCAAI,WAAU;0CACZ,aAAa,GAAG,CAAC,CAAC,YAAY,kBAC7B,6LAAC;wCAAY,WAAU;kDACpB;uCADO;;;;;;;;;;;;;;;;kCAQhB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC,sOAAW;wCAAC,WAAU;;;;;;kDACvB,6LAAC;wCAAG,WAAU;kDAAgB;;;;;;;;;;;;0CAEhC,6LAAC;gCAAI,WAAU;0CACZ,YAAY,GAAG,CAAC,CAAC,YAAY,kBAC5B,6LAAC;wCAAY,WAAU;kDACpB;uCADO;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASxB;GAhEgB;;QACU,0IAAO;;;KADjB"}},
    {"offset": {"line": 1437, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/KOMPYUTER_01/v0-nexa-gpt-development/components/message-bubble.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport type { Message } from \"@/lib/types\"\r\nimport { Bot, User, Copy, Check } from \"lucide-react\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport ReactMarkdown from \"react-markdown\"\r\nimport { Prism as SyntaxHighlighter } from \"react-syntax-highlighter\"\r\nimport { oneDark, oneLight } from \"react-syntax-highlighter/dist/esm/styles/prism\"\r\nimport { useTheme } from \"@/contexts/theme-context\"\r\nimport { useState } from \"react\"\r\n\r\ninterface MessageBubbleProps {\r\n  message: Message\r\n  isStreaming?: boolean\r\n}\r\n\r\nexport function MessageBubble({ message, isStreaming }: MessageBubbleProps) {\r\n  const { theme } = useTheme()\r\n  const isUser = message.role === \"user\"\r\n  const [copied, setCopied] = useState<string | null>(null)\r\n\r\n  const copyToClipboard = (text: string, id: string) => {\r\n    navigator.clipboard.writeText(text)\r\n    setCopied(id)\r\n    setTimeout(() => setCopied(null), 2000)\r\n  }\r\n\r\n  return (\r\n    <div className={cn(\"flex gap-4\", isUser ? \"justify-end\" : \"justify-start\")}>\r\n      {/* Avatar */}\r\n      {!isUser && (\r\n        <div className=\"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-foreground text-background\">\r\n          <Bot className=\"h-4 w-4\" />\r\n        </div>\r\n      )}\r\n\r\n      {/* Message Content */}\r\n      <div className={cn(\"max-w-[85%] md:max-w-[75%]\", isUser && \"order-first\")}>\r\n        <div\r\n          className={cn(\r\n            \"rounded-2xl px-4 py-3 text-sm leading-relaxed\",\r\n            isUser ? \"bg-foreground text-background rounded-br-md\" : \"bg-muted text-foreground rounded-bl-md\",\r\n          )}\r\n        >\r\n          {isUser ? (\r\n            <p className=\"whitespace-pre-wrap\">{message.content}</p>\r\n          ) : (\r\n            <div className=\"prose prose-sm dark:prose-invert max-w-none\">\r\n              <ReactMarkdown\r\n                components={{\r\n                  code({ className, children, ...props }) {\r\n                    const match = /language-(\\w+)/.exec(className || \"\")\r\n                    const codeString = String(children).replace(/\\n$/, \"\")\r\n                    const codeId = `code-${Math.random()}`\r\n\r\n                    if (!match) {\r\n                      return (\r\n                        <code className=\"rounded bg-background/50 px-1.5 py-0.5 font-mono text-xs\" {...props}>\r\n                          {children}\r\n                        </code>\r\n                      )\r\n                    }\r\n\r\n                    return (\r\n                      <div className=\"my-3 overflow-hidden rounded-lg border border-border bg-background\">\r\n                        <div className=\"flex items-center justify-between bg-muted/50 px-4 py-2\">\r\n                          <span className=\"text-xs font-medium text-muted-foreground\">{match[1]}</span>\r\n                          <button\r\n                            onClick={() => copyToClipboard(codeString, codeId)}\r\n                            className=\"flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground transition-colors\"\r\n                          >\r\n                            {copied === codeId ? (\r\n                              <>\r\n                                <Check className=\"h-3 w-3\" />\r\n                                Copied!\r\n                              </>\r\n                            ) : (\r\n                              <>\r\n                                <Copy className=\"h-3 w-3\" />\r\n                                Copy\r\n                              </>\r\n                            )}\r\n                          </button>\r\n                        </div>\r\n                        <SyntaxHighlighter\r\n                          style={theme === \"dark\" ? oneDark : oneLight}\r\n                          language={match[1]}\r\n                          PreTag=\"div\"\r\n                          customStyle={{\r\n                            margin: 0,\r\n                            borderRadius: 0,\r\n                            fontSize: \"0.8rem\",\r\n                            background: \"transparent\",\r\n                          }}\r\n                        >\r\n                          {codeString}\r\n                        </SyntaxHighlighter>\r\n                      </div>\r\n                    )\r\n                  },\r\n                  p({ children }) {\r\n                    return <p className=\"mb-3 last:mb-0 leading-relaxed\">{children}</p>\r\n                  },\r\n                  ul({ children }) {\r\n                    return <ul className=\"list-disc pl-5 mb-3 space-y-1\">{children}</ul>\r\n                  },\r\n                  ol({ children }) {\r\n                    return <ol className=\"list-decimal pl-5 mb-3 space-y-1\">{children}</ol>\r\n                  },\r\n                  li({ children }) {\r\n                    return <li className=\"leading-relaxed\">{children}</li>\r\n                  },\r\n                  h1({ children }) {\r\n                    return <h1 className=\"text-xl font-bold mb-3 mt-4 first:mt-0\">{children}</h1>\r\n                  },\r\n                  h2({ children }) {\r\n                    return <h2 className=\"text-lg font-bold mb-2 mt-4 first:mt-0\">{children}</h2>\r\n                  },\r\n                  h3({ children }) {\r\n                    return <h3 className=\"text-base font-bold mb-2 mt-3 first:mt-0\">{children}</h3>\r\n                  },\r\n                  blockquote({ children }) {\r\n                    return (\r\n                      <blockquote className=\"border-l-4 border-muted-foreground/30 pl-4 my-3 italic text-muted-foreground\">\r\n                        {children}\r\n                      </blockquote>\r\n                    )\r\n                  },\r\n                  table({ children }) {\r\n                    return (\r\n                      <div className=\"my-3 overflow-x-auto\">\r\n                        <table className=\"min-w-full border border-border rounded-lg\">{children}</table>\r\n                      </div>\r\n                    )\r\n                  },\r\n                  th({ children }) {\r\n                    return <th className=\"border border-border bg-muted px-3 py-2 text-left font-medium\">{children}</th>\r\n                  },\r\n                  td({ children }) {\r\n                    return <td className=\"border border-border px-3 py-2\">{children}</td>\r\n                  },\r\n                }}\r\n              >\r\n                {message.content}\r\n              </ReactMarkdown>\r\n              {isStreaming && (\r\n                <span className=\"inline-block w-2 h-4 bg-foreground/70 animate-pulse ml-1 align-middle\" />\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Timestamp */}\r\n        <p className={cn(\"mt-1 text-xs text-muted-foreground\", isUser && \"text-right\")}>\r\n          {new Date(message.created_at).toLocaleTimeString(\"uz-UZ\", {\r\n            hour: \"2-digit\",\r\n            minute: \"2-digit\",\r\n          })}\r\n        </p>\r\n      </div>\r\n\r\n      {/* User Avatar */}\r\n      {isUser && (\r\n        <div className=\"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary text-primary-foreground\">\r\n          <User className=\"h-4 w-4\" />\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1791, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/KOMPYUTER_01/v0-nexa-gpt-development/components/chat-input.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport type React from \"react\"\r\nimport { useState, useRef, type FormEvent } from \"react\"\r\nimport { useChat } from \"@/contexts/chat-context\"\r\nimport { useLanguage } from \"@/contexts/language-context\"\r\nimport { Mic, ImageIcon, Send, Square, Loader2, Upload, Camera } from \"lucide-react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\ninterface SpeechRecognitionResult {\r\n  transcript: string\r\n  confidence: number\r\n}\r\n\r\ninterface SpeechRecognitionResultList {\r\n  [index: number]: { [index: number]: SpeechRecognitionResult }\r\n  length: number\r\n}\r\n\r\ninterface SpeechRecognitionEvent {\r\n  results: SpeechRecognitionResultList\r\n}\r\n\r\ninterface SpeechRecognitionInstance {\r\n  continuous: boolean\r\n  interimResults: boolean\r\n  lang: string\r\n  onresult: ((event: SpeechRecognitionEvent) => void) | null\r\n  onerror: ((event: Event) => void) | null\r\n  onend: (() => void) | null\r\n  start: () => void\r\n  stop: () => void\r\n}\r\n\r\ndeclare global {\r\n  interface Window {\r\n    webkitSpeechRecognition: new () => SpeechRecognitionInstance\r\n    SpeechRecognition: new () => SpeechRecognitionInstance\r\n  }\r\n}\r\n\r\nexport function ChatInput() {\r\n  const [message, setMessage] = useState(\"\")\r\n  const [isRecording, setIsRecording] = useState(false)\r\n  const [selectedImages, setSelectedImages] = useState<string[]>([])\r\n  const fileInputRef = useRef<HTMLInputElement>(null)\r\n  const cameraInputRef = useRef<HTMLInputElement>(null)\r\n  const textareaRef = useRef<HTMLTextAreaElement>(null)\r\n  const recognitionRef = useRef<SpeechRecognitionInstance | null>(null)\r\n\r\n  const { sendMessage, isStreaming, activeModule, modules } = useChat()\r\n  const { t } = useLanguage()\r\n  const currentModule = modules.find((m) => m.slug === activeModule)\r\n\r\n  const layoutActions = currentModule?.layout?.actions || []\r\n  const hasUpload = layoutActions.some((a: any) => a.type === \"upload\")\r\n  const hasCamera = layoutActions.some((a: any) => a.type === \"camera\")\r\n\r\n  const handleSubmit = async (e?: FormEvent) => {\r\n    e?.preventDefault()\r\n    if ((!message.trim() && selectedImages.length === 0) || isStreaming) return\r\n\r\n    const content = message.trim() || \"Bu rasmni tahlil qiling\"\r\n    await sendMessage(content, selectedImages.length > 0 ? selectedImages : undefined)\r\n    setMessage(\"\")\r\n    setSelectedImages([])\r\n\r\n    if (textareaRef.current) {\r\n      textareaRef.current.style.height = \"auto\"\r\n    }\r\n  }\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent) => {\r\n    if (e.key === \"Enter\" && !e.shiftKey) {\r\n      e.preventDefault()\r\n      handleSubmit()\r\n    }\r\n  }\r\n\r\n  const handleTextareaChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n    setMessage(e.target.value)\r\n    // Auto-resize\r\n    const textarea = e.target\r\n    textarea.style.height = \"auto\"\r\n    textarea.style.height = Math.min(textarea.scrollHeight, 200) + \"px\"\r\n  }\r\n\r\n  const handleImageUpload = () => {\r\n    fileInputRef.current?.click()\r\n  }\r\n\r\n  const handleCameraInput = () => {\r\n    cameraInputRef.current?.click()\r\n  }\r\n\r\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const files = e.target.files\r\n    if (files) {\r\n      Array.from(files).forEach((file) => {\r\n        const reader = new FileReader()\r\n        reader.onload = (event) => {\r\n          const base64 = event.target?.result as string\r\n          setSelectedImages((prev) => [...prev, base64])\r\n        }\r\n        reader.readAsDataURL(file)\r\n      })\r\n    }\r\n  }\r\n\r\n  const handleVoiceInput = () => {\r\n    if (typeof window === \"undefined\") return\r\n\r\n    const hasSpeechRecognition = \"webkitSpeechRecognition\" in window || \"SpeechRecognition\" in window\r\n    if (!hasSpeechRecognition) {\r\n      alert(\"Voice input is not supported in this browser\")\r\n      return\r\n    }\r\n\r\n    if (isRecording && recognitionRef.current) {\r\n      recognitionRef.current.stop()\r\n      setIsRecording(false)\r\n      return\r\n    }\r\n\r\n    const SpeechRecognitionAPI = window.webkitSpeechRecognition || window.SpeechRecognition\r\n    const recognition = new SpeechRecognitionAPI()\r\n    recognitionRef.current = recognition\r\n\r\n    recognition.continuous = true\r\n    recognition.interimResults = true\r\n    recognition.lang = \"uz-UZ\"\r\n\r\n    recognition.onresult = (event: SpeechRecognitionEvent) => {\r\n      let transcript = \"\"\r\n      for (let i = 0; i < event.results.length; i++) {\r\n        transcript += event.results[i][0].transcript\r\n      }\r\n      setMessage(transcript)\r\n    }\r\n\r\n    recognition.onerror = () => {\r\n      setIsRecording(false)\r\n    }\r\n\r\n    recognition.onend = () => {\r\n      setIsRecording(false)\r\n    }\r\n\r\n    recognition.start()\r\n    setIsRecording(true)\r\n  }\r\n\r\n  const removeImage = (index: number) => {\r\n    setSelectedImages((prev) => prev.filter((_, i) => i !== index))\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"w-full max-w-3xl mx-auto px-4 pb-4\">\r\n      {/* Selected Images Preview */}\r\n      {selectedImages.length > 0 && (\r\n        <div className=\"flex gap-2 mb-3 flex-wrap\">\r\n          {selectedImages.map((img, index) => (\r\n            <div key={index} className=\"relative\">\r\n              <img\r\n                src={img || \"/placeholder.svg\"}\r\n                alt=\"Selected\"\r\n                className=\"h-16 w-16 object-cover rounded-lg border border-border\"\r\n              />\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => removeImage(index)}\r\n                className=\"absolute -top-2 -right-2 h-5 w-5 rounded-full bg-destructive text-destructive-foreground flex items-center justify-center text-xs font-bold\"\r\n              >\r\n                Ã—\r\n              </button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"flex items-end gap-2 rounded-2xl border border-input bg-background p-2 shadow-sm focus-within:ring-2 focus-within:ring-ring/20\">\r\n        {/* Voice Button */}\r\n        <button\r\n          type=\"button\"\r\n          onClick={handleVoiceInput}\r\n          className={cn(\r\n            \"flex h-10 w-10 shrink-0 items-center justify-center rounded-xl transition-colors\",\r\n            isRecording ? \"bg-red-500 text-white animate-pulse\" : \"hover:bg-muted\",\r\n          )}\r\n          title=\"Voice input\"\r\n        >\r\n          {isRecording ? <Square className=\"h-4 w-4\" /> : <Mic className=\"h-5 w-5 text-muted-foreground\" />}\r\n        </button>\r\n\r\n        {hasUpload && (\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleImageUpload}\r\n            className=\"flex h-10 w-10 shrink-0 items-center justify-center rounded-xl transition-colors hover:bg-muted\"\r\n            title=\"Upload photo\"\r\n          >\r\n            <Upload className=\"h-5 w-5 text-muted-foreground\" />\r\n          </button>\r\n        )}\r\n\r\n        {hasCamera && (\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleCameraInput}\r\n            className=\"flex h-10 w-10 shrink-0 items-center justify-center rounded-xl transition-colors hover:bg-muted\"\r\n            title=\"Take photo\"\r\n          >\r\n            <Camera className=\"h-5 w-5 text-muted-foreground\" />\r\n          </button>\r\n        )}\r\n\r\n        {!hasUpload && !hasCamera && (\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleImageUpload}\r\n            className=\"flex h-10 w-10 shrink-0 items-center justify-center rounded-xl transition-colors hover:bg-muted\"\r\n            title=\"Upload image\"\r\n          >\r\n            <ImageIcon className=\"h-5 w-5 text-muted-foreground\" />\r\n          </button>\r\n        )}\r\n\r\n        <input\r\n          ref={fileInputRef}\r\n          type=\"file\"\r\n          accept=\"image/*\"\r\n          multiple\r\n          onChange={handleFileChange}\r\n          className=\"hidden\"\r\n        />\r\n        <input\r\n          ref={cameraInputRef}\r\n          type=\"file\"\r\n          accept=\"image/*\"\r\n          capture=\"environment\"\r\n          onChange={handleFileChange}\r\n          className=\"hidden\"\r\n        />\r\n\r\n        {/* Text Input */}\r\n        <textarea\r\n          ref={textareaRef}\r\n          value={message}\r\n          onChange={handleTextareaChange}\r\n          onKeyDown={handleKeyDown}\r\n          placeholder={`${currentModule?.name || \"NexaGPT\"}ga ${t(\"typeMessage\")}`}\r\n          disabled={isStreaming}\r\n          rows={1}\r\n          className=\"flex-1 resize-none bg-transparent py-2.5 text-sm outline-none placeholder:text-muted-foreground disabled:opacity-50 max-h-[200px]\"\r\n        />\r\n\r\n        {/* Send Button */}\r\n        <button\r\n          type=\"submit\"\r\n          disabled={(!message.trim() && selectedImages.length === 0) || isStreaming}\r\n          className={cn(\r\n            \"flex h-10 w-10 shrink-0 items-center justify-center rounded-xl transition-all\",\r\n            message.trim() || selectedImages.length > 0\r\n              ? \"bg-foreground text-background hover:opacity-90\"\r\n              : \"text-muted-foreground\",\r\n            isStreaming && \"opacity-50\",\r\n          )}\r\n        >\r\n          {isStreaming ? <Loader2 className=\"h-5 w-5 animate-spin\" /> : <Send className=\"h-5 w-5\" />}\r\n        </button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2119, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/KOMPYUTER_01/v0-nexa-gpt-development/components/module-tabs.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useChat } from \"@/contexts/chat-context\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport { LayoutGrid, Search, Leaf, Code, Cloud, Heart, Bot } from \"lucide-react\"\r\nimport type React from \"react\"\r\n\r\ntype ModuleSlug = \"nexagpt\" | \"agro\" | \"code\" | \"weather\" | \"health\"\r\n\r\nconst iconMap: Record<string, React.ElementType> = {\r\n  bot: Bot,\r\n  leaf: Leaf,\r\n  code: Code,\r\n  cloud: Cloud,\r\n  heart: Heart,\r\n}\r\n\r\nconst tabOrder: ModuleSlug[] = [\"nexagpt\", \"code\", \"agro\", \"health\", \"weather\"]\r\n\r\nexport function ModuleTabs() {\r\n  const { activeModule, setActiveModule, createNewConversation, modules } = useChat()\r\n\r\n  const handleTabClick = (slug: ModuleSlug) => {\r\n    if (slug !== activeModule) {\r\n      setActiveModule(slug)\r\n      createNewConversation(slug)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex items-center gap-1 rounded-full bg-muted p-1 overflow-x-auto max-w-full\">\r\n      {tabOrder.map((slug) => {\r\n        const module = modules.find((m) => m.slug === slug)\r\n        if (!module) return null\r\n\r\n        const Icon = iconMap[module.icon] || Bot\r\n        const isActive = activeModule === slug\r\n\r\n        return (\r\n          <button\r\n            key={slug}\r\n            onClick={() => handleTabClick(slug)}\r\n            className={cn(\r\n              \"flex items-center gap-1.5 rounded-full px-3 py-1.5 text-sm font-medium transition-all whitespace-nowrap\",\r\n              isActive\r\n                ? \"bg-background shadow-sm text-foreground\"\r\n                : \"text-muted-foreground hover:bg-background/50 hover:text-foreground\",\r\n            )}\r\n          >\r\n            {slug === \"nexagpt\" ? (\r\n              <LayoutGrid className=\"h-4 w-4\" />\r\n            ) : (\r\n              <Icon className=\"h-4 w-4\" style={{ color: isActive ? module.theme_color : undefined }} />\r\n            )}\r\n            <span className=\"hidden sm:inline\">{module.name.replace(\"AI\", \"\").trim()}</span>\r\n          </button>\r\n        )\r\n      })}\r\n\r\n      <button className=\"flex items-center justify-center rounded-full p-2 transition-colors hover:bg-background/50 text-muted-foreground\">\r\n        <Search className=\"h-4 w-4\" />\r\n      </button>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAJA;;;;AASA,MAAM,UAA6C;IACjD,KAAK,0MAAG;IACR,MAAM,6MAAI;IACV,MAAM,6MAAI;IACV,OAAO,gNAAK;IACZ,OAAO,gNAAK;AACd;AAEA,MAAM,WAAyB;IAAC;IAAW;IAAQ;IAAQ;IAAU;CAAU;AAExE,SAAS;;IACd,MAAM,EAAE,YAAY,EAAE,eAAe,EAAE,qBAAqB,EAAE,OAAO,EAAE,GAAG,IAAA,0IAAO;IAEjF,MAAM,iBAAiB,CAAC;QACtB,IAAI,SAAS,cAAc;YACzB,gBAAgB;YAChB,sBAAsB;QACxB;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;YACZ,SAAS,GAAG,CAAC,CAAC;gBACb,MAAM,SAAS,QAAQ,IAAI,CAAC,CAAC,IAAM,EAAE,IAAI,KAAK;gBAC9C,IAAI,CAAC,QAAQ,OAAO;gBAEpB,MAAM,OAAO,OAAO,CAAC,OAAO,IAAI,CAAC,IAAI,0MAAG;gBACxC,MAAM,WAAW,iBAAiB;gBAElC,qBACE,6LAAC;oBAEC,SAAS,IAAM,eAAe;oBAC9B,WAAW,IAAA,qHAAE,EACX,2GACA,WACI,4CACA;;wBAGL,SAAS,0BACR,6LAAC,mOAAU;4BAAC,WAAU;;;;;iDAEtB,6LAAC;4BAAK,WAAU;4BAAU,OAAO;gCAAE,OAAO,WAAW,OAAO,WAAW,GAAG;4BAAU;;;;;;sCAEtF,6LAAC;4BAAK,WAAU;sCAAoB,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,IAAI,IAAI;;;;;;;mBAdjE;;;;;YAiBX;0BAEA,6LAAC;gBAAO,WAAU;0BAChB,cAAA,6LAAC,mNAAM;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI1B;GA7CgB;;QAC4D,0IAAO;;;KADnE"}},
    {"offset": {"line": 2241, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/KOMPYUTER_01/v0-nexa-gpt-development/components/chat-area.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useRef, useEffect } from \"react\"\r\nimport { useChat } from \"@/contexts/chat-context\"\r\nimport { WelcomeScreen } from \"./welcome-screen\"\r\nimport { MessageBubble } from \"./message-bubble\"\r\nimport { ChatInput } from \"./chat-input\"\r\nimport { ModuleTabs } from \"./module-tabs\"\r\nimport { Menu } from \"lucide-react\"\r\n\r\ninterface ChatAreaProps {\r\n  onToggleSidebar: () => void\r\n  sidebarOpen: boolean\r\n}\r\n\r\nexport function ChatArea({ onToggleSidebar, sidebarOpen }: ChatAreaProps) {\r\n  const { messages, isStreaming, activeModule, modules } = useChat()\r\n  const messagesEndRef = useRef<HTMLDivElement>(null)\r\n  const containerRef = useRef<HTMLDivElement>(null)\r\n\r\n  const currentModule = modules.find((m) => m.slug === activeModule)\r\n\r\n  useEffect(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" })\r\n  }, [messages])\r\n\r\n  const hasMessages = messages.length > 0\r\n\r\n  return (\r\n    <div className=\"flex h-full flex-col\">\r\n      {/* Header with Tabs */}\r\n      <header className=\"sticky top-0 z-20 flex items-center justify-between border-b border-border bg-background/95 backdrop-blur px-4 py-3\">\r\n        <button onClick={onToggleSidebar} className=\"rounded-lg p-2 hover:bg-muted lg:hidden\">\r\n          <Menu className=\"h-5 w-5\" />\r\n        </button>\r\n        <div className=\"flex-1 flex justify-center\">\r\n          <ModuleTabs />\r\n        </div>\r\n        <div className=\"w-10 lg:hidden\" />\r\n      </header>\r\n\r\n      {/* Chat Area */}\r\n      <div ref={containerRef} className=\"flex-1 overflow-y-auto\">\r\n        {!hasMessages ? (\r\n          <WelcomeScreen module={currentModule} />\r\n        ) : (\r\n          <div className=\"mx-auto max-w-3xl px-4 py-6\">\r\n            <div className=\"space-y-6\">\r\n              {messages.map((message, index) => (\r\n                <MessageBubble\r\n                  key={message.id || index}\r\n                  message={message}\r\n                  isStreaming={isStreaming && index === messages.length - 1 && message.role === \"assistant\"}\r\n                />\r\n              ))}\r\n            </div>\r\n            <div ref={messagesEndRef} className=\"h-4\" />\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Input Area - Fixed at bottom */}\r\n      <div className=\"sticky bottom-0 border-t border-border bg-background p-4\">\r\n        <ChatInput />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AARA;;;;;;;;AAeO,SAAS,SAAS,EAAE,eAAe,EAAE,WAAW,EAAiB;;IACtE,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,YAAY,EAAE,OAAO,EAAE,GAAG,IAAA,0IAAO;IAChE,MAAM,iBAAiB,IAAA,uKAAM,EAAiB;IAC9C,MAAM,eAAe,IAAA,uKAAM,EAAiB;IAE5C,MAAM,gBAAgB,QAAQ,IAAI,CAAC,CAAC,IAAM,EAAE,IAAI,KAAK;IAErD,IAAA,0KAAS;8BAAC;YACR,eAAe,OAAO,EAAE,eAAe;gBAAE,UAAU;YAAS;QAC9D;6BAAG;QAAC;KAAS;IAEb,MAAM,cAAc,SAAS,MAAM,GAAG;IAEtC,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBAAO,WAAU;;kCAChB,6LAAC;wBAAO,SAAS;wBAAiB,WAAU;kCAC1C,cAAA,6LAAC,6MAAI;4BAAC,WAAU;;;;;;;;;;;kCAElB,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,8IAAU;;;;;;;;;;kCAEb,6LAAC;wBAAI,WAAU;;;;;;;;;;;;0BAIjB,6LAAC;gBAAI,KAAK;gBAAc,WAAU;0BAC/B,CAAC,4BACA,6LAAC,oJAAa;oBAAC,QAAQ;;;;;yCAEvB,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;sCACZ,SAAS,GAAG,CAAC,CAAC,SAAS,sBACtB,6LAAC,oJAAa;oCAEZ,SAAS;oCACT,aAAa,eAAe,UAAU,SAAS,MAAM,GAAG,KAAK,QAAQ,IAAI,KAAK;mCAFzE,QAAQ,EAAE,IAAI;;;;;;;;;;sCAMzB,6LAAC;4BAAI,KAAK;4BAAgB,WAAU;;;;;;;;;;;;;;;;;0BAM1C,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,4IAAS;;;;;;;;;;;;;;;;AAIlB;GApDgB;;QAC2C,0IAAO;;;KADlD"}},
    {"offset": {"line": 2405, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/KOMPYUTER_01/v0-nexa-gpt-development/components/search-modal.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect, useRef } from \"react\"\r\nimport { useChat } from \"@/contexts/chat-context\"\r\nimport { Search, MessageSquare, X, Clock, ArrowRight, Leaf, Code, Cloud, Heart, Bot } from \"lucide-react\"\r\nimport { cn } from \"@/lib/utils\"\r\nimport type React from \"react\"\r\n\r\nconst iconMap: Record<string, React.ElementType> = {\r\n  bot: Bot,\r\n  leaf: Leaf,\r\n  code: Code,\r\n  cloud: Cloud,\r\n  heart: Heart,\r\n}\r\n\r\ninterface SearchModalProps {\r\n  open: boolean\r\n  onClose: () => void\r\n}\r\n\r\nexport function SearchModal({ open, onClose }: SearchModalProps) {\r\n  const [query, setQuery] = useState(\"\")\r\n  const [selectedIndex, setSelectedIndex] = useState(0)\r\n  const inputRef = useRef<HTMLInputElement>(null)\r\n\r\n  const { conversations, modules, selectConversation, createNewConversation } = useChat()\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      setQuery(\"\")\r\n      setSelectedIndex(0)\r\n      setTimeout(() => inputRef.current?.focus(), 100)\r\n    }\r\n  }, [open])\r\n\r\n  const filteredConversations = conversations.filter((c) => c.title.toLowerCase().includes(query.toLowerCase()))\r\n\r\n  const filteredModules = modules.filter(\r\n    (m) =>\r\n      m.name.toLowerCase().includes(query.toLowerCase()) || m.description?.toLowerCase().includes(query.toLowerCase()),\r\n  )\r\n\r\n  const allResults = [\r\n    ...filteredModules.map((m) => ({ type: \"module\" as const, data: m })),\r\n    ...filteredConversations.map((c) => ({ type: \"conversation\" as const, data: c })),\r\n  ]\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent) => {\r\n    if (e.key === \"ArrowDown\") {\r\n      e.preventDefault()\r\n      setSelectedIndex((prev) => Math.min(prev + 1, allResults.length - 1))\r\n    } else if (e.key === \"ArrowUp\") {\r\n      e.preventDefault()\r\n      setSelectedIndex((prev) => Math.max(prev - 1, 0))\r\n    } else if (e.key === \"Enter\" && allResults[selectedIndex]) {\r\n      e.preventDefault()\r\n      handleSelect(allResults[selectedIndex])\r\n    }\r\n  }\r\n\r\n  const handleSelect = (result: (typeof allResults)[0]) => {\r\n    if (result.type === \"module\") {\r\n      createNewConversation(result.data.slug as \"nexagpt\" | \"agro\" | \"code\" | \"weather\" | \"health\")\r\n    } else {\r\n      selectConversation(result.data.id)\r\n    }\r\n    onClose()\r\n  }\r\n\r\n  if (!open) return null\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-start justify-center pt-[15vh] px-4\">\r\n      {/* Backdrop */}\r\n      <div className=\"absolute inset-0 bg-background/80 backdrop-blur-sm\" onClick={onClose} />\r\n\r\n      {/* Modal - macOS Finder Style */}\r\n      <div className=\"relative w-full max-w-xl overflow-hidden rounded-xl border border-border bg-background shadow-2xl\">\r\n        {/* Search Input */}\r\n        <div className=\"flex items-center gap-3 border-b border-border px-4 py-3\">\r\n          <Search className=\"h-5 w-5 text-muted-foreground\" />\r\n          <input\r\n            ref={inputRef}\r\n            type=\"text\"\r\n            value={query}\r\n            onChange={(e) => {\r\n              setQuery(e.target.value)\r\n              setSelectedIndex(0)\r\n            }}\r\n            onKeyDown={handleKeyDown}\r\n            placeholder=\"Qidirish...\"\r\n            className=\"flex-1 bg-transparent text-base outline-none placeholder:text-muted-foreground\"\r\n          />\r\n          <kbd className=\"hidden rounded bg-muted px-2 py-1 text-xs text-muted-foreground sm:inline\">ESC</kbd>\r\n          <button onClick={onClose} className=\"rounded-lg p-1 hover:bg-muted sm:hidden\">\r\n            <X className=\"h-5 w-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Results */}\r\n        <div className=\"max-h-[60vh] overflow-y-auto p-2\">\r\n          {/* Modules Section */}\r\n          {filteredModules.length > 0 && (\r\n            <div className=\"mb-2\">\r\n              <p className=\"px-3 py-2 text-xs font-medium text-muted-foreground\">Modullar</p>\r\n              {filteredModules.map((module, index) => {\r\n                const Icon = iconMap[module.icon] || Bot\r\n                const resultIndex = index\r\n                return (\r\n                  <button\r\n                    key={module.id}\r\n                    onClick={() => handleSelect({ type: \"module\", data: module })}\r\n                    className={cn(\r\n                      \"flex w-full items-center gap-3 rounded-lg px-3 py-2.5 text-left transition-colors\",\r\n                      selectedIndex === resultIndex ? \"bg-primary text-primary-foreground\" : \"hover:bg-muted\",\r\n                    )}\r\n                  >\r\n                    <div\r\n                      className=\"flex h-8 w-8 items-center justify-center rounded-lg\"\r\n                      style={{ backgroundColor: module.theme_color }}\r\n                    >\r\n                      <Icon className=\"h-4 w-4 text-white\" />\r\n                    </div>\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <p className=\"font-medium truncate\">{module.name}</p>\r\n                      <p\r\n                        className={cn(\r\n                          \"text-xs truncate\",\r\n                          selectedIndex === resultIndex ? \"text-primary-foreground/70\" : \"text-muted-foreground\",\r\n                        )}\r\n                      >\r\n                        {module.description}\r\n                      </p>\r\n                    </div>\r\n                    <ArrowRight\r\n                      className={cn(\"h-4 w-4\", selectedIndex === resultIndex ? \"opacity-100\" : \"opacity-0\")}\r\n                    />\r\n                  </button>\r\n                )\r\n              })}\r\n            </div>\r\n          )}\r\n\r\n          {/* Conversations Section */}\r\n          {filteredConversations.length > 0 && (\r\n            <div>\r\n              <p className=\"px-3 py-2 text-xs font-medium text-muted-foreground\">Suhbatlar</p>\r\n              {filteredConversations.slice(0, 10).map((conversation, index) => {\r\n                const resultIndex = filteredModules.length + index\r\n                return (\r\n                  <button\r\n                    key={conversation.id}\r\n                    onClick={() => handleSelect({ type: \"conversation\", data: conversation })}\r\n                    className={cn(\r\n                      \"flex w-full items-center gap-3 rounded-lg px-3 py-2.5 text-left transition-colors\",\r\n                      selectedIndex === resultIndex ? \"bg-primary text-primary-foreground\" : \"hover:bg-muted\",\r\n                    )}\r\n                  >\r\n                    <div className=\"flex h-8 w-8 items-center justify-center rounded-lg bg-muted\">\r\n                      <MessageSquare className=\"h-4 w-4\" />\r\n                    </div>\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <p className=\"font-medium truncate\">{conversation.title}</p>\r\n                      <p\r\n                        className={cn(\r\n                          \"text-xs flex items-center gap-1\",\r\n                          selectedIndex === resultIndex ? \"text-primary-foreground/70\" : \"text-muted-foreground\",\r\n                        )}\r\n                      >\r\n                        <Clock className=\"h-3 w-3\" />\r\n                        {new Date(conversation.updated_at).toLocaleDateString(\"uz-UZ\")}\r\n                      </p>\r\n                    </div>\r\n                    <ArrowRight\r\n                      className={cn(\"h-4 w-4\", selectedIndex === resultIndex ? \"opacity-100\" : \"opacity-0\")}\r\n                    />\r\n                  </button>\r\n                )\r\n              })}\r\n            </div>\r\n          )}\r\n\r\n          {/* Empty State */}\r\n          {query && allResults.length === 0 && (\r\n            <div className=\"py-8 text-center text-muted-foreground\">\r\n              <Search className=\"mx-auto h-8 w-8 mb-2 opacity-50\" />\r\n              <p>Hech narsa topilmadi</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Initial State */}\r\n          {!query && allResults.length === 0 && (\r\n            <div className=\"py-8 text-center text-muted-foreground\">\r\n              <p>Modul yoki suhbat qidiring</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"flex items-center justify-between border-t border-border px-4 py-2 text-xs text-muted-foreground\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <span className=\"flex items-center gap-1\">\r\n              <kbd className=\"rounded bg-muted px-1.5 py-0.5\">â†‘</kbd>\r\n              <kbd className=\"rounded bg-muted px-1.5 py-0.5\">â†“</kbd>\r\n              navigatsiya\r\n            </span>\r\n            <span className=\"flex items-center gap-1\">\r\n              <kbd className=\"rounded bg-muted px-1.5 py-0.5\">â†µ</kbd>\r\n              tanlash\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2862, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/KOMPYUTER_01/v0-nexa-gpt-development/components/settings-modal.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport { useTheme } from \"@/contexts/theme-context\"\r\nimport { useAuth } from \"@/contexts/auth-context\"\r\nimport { useChat } from \"@/contexts/chat-context\"\r\nimport { X, Sun, Moon, Monitor, Trash2, AlertTriangle, Bell, Volume2 } from \"lucide-react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\ninterface SettingsModalProps {\r\n  open: boolean\r\n  onClose: () => void\r\n}\r\n\r\nexport function SettingsModal({ open, onClose }: SettingsModalProps) {\r\n  const { theme, setTheme } = useTheme()\r\n  const { settings, updateSettings } = useAuth()\r\n  const { clearAllConversations, conversations } = useChat()\r\n  const [showClearConfirm, setShowClearConfirm] = useState(false)\r\n  const [isClearing, setIsClearing] = useState(false)\r\n\r\n  const handleClearConversations = async () => {\r\n    setIsClearing(true)\r\n    await clearAllConversations()\r\n    setIsClearing(false)\r\n    setShowClearConfirm(false)\r\n  }\r\n\r\n  const handleThemeChange = (newTheme: \"light\" | \"dark\" | \"system\") => {\r\n    setTheme(newTheme)\r\n    updateSettings({ theme: newTheme })\r\n  }\r\n\r\n  if (!open) return null\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center px-4\">\r\n      {/* Backdrop */}\r\n      <div className=\"absolute inset-0 bg-background/80 backdrop-blur-sm\" onClick={onClose} />\r\n\r\n      {/* Modal */}\r\n      <div className=\"relative w-full max-w-md overflow-hidden rounded-2xl border border-border bg-background shadow-2xl\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between border-b border-border px-6 py-4\">\r\n          <h2 className=\"text-lg font-semibold\">Sozlamalar</h2>\r\n          <button onClick={onClose} className=\"rounded-lg p-2 hover:bg-muted\">\r\n            <X className=\"h-5 w-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"max-h-[70vh] overflow-y-auto p-6 space-y-6\">\r\n          {/* Theme Selection */}\r\n          <div>\r\n            <h3 className=\"text-sm font-medium mb-3\">Mavzu</h3>\r\n            <div className=\"grid grid-cols-3 gap-2\">\r\n              <button\r\n                onClick={() => handleThemeChange(\"light\")}\r\n                className={cn(\r\n                  \"flex flex-col items-center gap-2 rounded-xl border-2 p-4 transition-all\",\r\n                  theme === \"light\" ? \"border-primary bg-primary/5\" : \"border-border hover:border-muted-foreground\",\r\n                )}\r\n              >\r\n                <Sun className=\"h-6 w-6\" />\r\n                <span className=\"text-sm\">Yorug'</span>\r\n              </button>\r\n              <button\r\n                onClick={() => handleThemeChange(\"dark\")}\r\n                className={cn(\r\n                  \"flex flex-col items-center gap-2 rounded-xl border-2 p-4 transition-all\",\r\n                  theme === \"dark\" ? \"border-primary bg-primary/5\" : \"border-border hover:border-muted-foreground\",\r\n                )}\r\n              >\r\n                <Moon className=\"h-6 w-6\" />\r\n                <span className=\"text-sm\">Qorong'i</span>\r\n              </button>\r\n              <button\r\n                onClick={() => handleThemeChange(\"system\")}\r\n                className={cn(\r\n                  \"flex flex-col items-center gap-2 rounded-xl border-2 p-4 transition-all\",\r\n                  theme === \"system\" ? \"border-primary bg-primary/5\" : \"border-border hover:border-muted-foreground\",\r\n                )}\r\n              >\r\n                <Monitor className=\"h-6 w-6\" />\r\n                <span className=\"text-sm\">Tizim</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Voice Settings */}\r\n          <div>\r\n            <h3 className=\"text-sm font-medium mb-3\">Ovoz sozlamalari</h3>\r\n            <label className=\"flex items-center justify-between rounded-xl border border-border p-4\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <Volume2 className=\"h-5 w-5 text-muted-foreground\" />\r\n                <span>Ovozli kiritish</span>\r\n              </div>\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={settings?.voice_enabled ?? true}\r\n                onChange={(e) => updateSettings({ voice_enabled: e.target.checked })}\r\n                className=\"h-5 w-5 rounded border-border\"\r\n              />\r\n            </label>\r\n          </div>\r\n\r\n          {/* Notifications */}\r\n          <div>\r\n            <h3 className=\"text-sm font-medium mb-3\">Bildirishnomalar</h3>\r\n            <label className=\"flex items-center justify-between rounded-xl border border-border p-4\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <Bell className=\"h-5 w-5 text-muted-foreground\" />\r\n                <span>Bildirishnomalar</span>\r\n              </div>\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={settings?.notifications_enabled ?? true}\r\n                onChange={(e) => updateSettings({ notifications_enabled: e.target.checked })}\r\n                className=\"h-5 w-5 rounded border-border\"\r\n              />\r\n            </label>\r\n          </div>\r\n\r\n          {/* Danger Zone */}\r\n          <div>\r\n            <h3 className=\"text-sm font-medium mb-3 text-destructive\">Xavfli zona</h3>\r\n            {!showClearConfirm ? (\r\n              <button\r\n                onClick={() => setShowClearConfirm(true)}\r\n                disabled={conversations.length === 0}\r\n                className=\"flex w-full items-center justify-between rounded-xl border border-destructive/30 bg-destructive/5 p-4 text-destructive transition-colors hover:bg-destructive/10 disabled:opacity-50\"\r\n              >\r\n                <div className=\"flex items-center gap-3\">\r\n                  <Trash2 className=\"h-5 w-5\" />\r\n                  <div className=\"text-left\">\r\n                    <p className=\"font-medium\">Barcha suhbatlarni o'chirish</p>\r\n                    <p className=\"text-xs text-destructive/70\">{conversations.length} ta suhbat</p>\r\n                  </div>\r\n                </div>\r\n              </button>\r\n            ) : (\r\n              <div className=\"rounded-xl border border-destructive bg-destructive/10 p-4 space-y-4\">\r\n                <div className=\"flex items-start gap-3\">\r\n                  <AlertTriangle className=\"h-5 w-5 text-destructive shrink-0 mt-0.5\" />\r\n                  <div>\r\n                    <p className=\"font-medium text-destructive\">Ishonchingiz komilmi?</p>\r\n                    <p className=\"text-sm text-destructive/70\">\r\n                      Bu amalni qaytarib bo'lmaydi. Barcha suhbatlar o'chiriladi.\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                  <button\r\n                    onClick={() => setShowClearConfirm(false)}\r\n                    className=\"flex-1 rounded-lg border border-border bg-background px-4 py-2 text-sm font-medium hover:bg-muted\"\r\n                  >\r\n                    Bekor qilish\r\n                  </button>\r\n                  <button\r\n                    onClick={handleClearConversations}\r\n                    disabled={isClearing}\r\n                    className=\"flex-1 rounded-lg bg-destructive px-4 py-2 text-sm font-medium text-destructive-foreground hover:bg-destructive/90 disabled:opacity-50\"\r\n                  >\r\n                    {isClearing ? \"O'chirilmoqda...\" : \"O'chirish\"}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3359, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/KOMPYUTER_01/v0-nexa-gpt-development/components/account-modal.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport type React from \"react\"\r\n\r\nimport { useState } from \"react\"\r\nimport { useAuth } from \"@/contexts/auth-context\"\r\nimport { X, User, Mail, Camera, Loader2, Check } from \"lucide-react\"\r\n\r\ninterface AccountModalProps {\r\n  open: boolean\r\n  onClose: () => void\r\n}\r\n\r\nexport function AccountModal({ open, onClose }: AccountModalProps) {\r\n  const { profile, updateProfile, user } = useAuth()\r\n  const [fullName, setFullName] = useState(profile?.full_name || \"\")\r\n  const [isSaving, setIsSaving] = useState(false)\r\n  const [saved, setSaved] = useState(false)\r\n\r\n  const handleSave = async () => {\r\n    setIsSaving(true)\r\n    await updateProfile({ full_name: fullName })\r\n    setIsSaving(false)\r\n    setSaved(true)\r\n    setTimeout(() => setSaved(false), 2000)\r\n  }\r\n\r\n  const handleAvatarChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0]\r\n    if (!file) return\r\n\r\n    // Convert to base64 for now (in production, upload to storage)\r\n    const reader = new FileReader()\r\n    reader.onload = async (event) => {\r\n      const base64 = event.target?.result as string\r\n      await updateProfile({ avatar_url: base64 })\r\n    }\r\n    reader.readAsDataURL(file)\r\n  }\r\n\r\n  if (!open) return null\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center px-4\">\r\n      {/* Backdrop */}\r\n      <div className=\"absolute inset-0 bg-background/80 backdrop-blur-sm\" onClick={onClose} />\r\n\r\n      {/* Modal */}\r\n      <div className=\"relative w-full max-w-md overflow-hidden rounded-2xl border border-border bg-background shadow-2xl\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between border-b border-border px-6 py-4\">\r\n          <h2 className=\"text-lg font-semibold\">Mening hisobim</h2>\r\n          <button onClick={onClose} className=\"rounded-lg p-2 hover:bg-muted\">\r\n            <X className=\"h-5 w-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"p-6 space-y-6\">\r\n          {/* Avatar */}\r\n          <div className=\"flex flex-col items-center gap-4\">\r\n            <div className=\"relative\">\r\n              <div className=\"h-24 w-24 overflow-hidden rounded-full bg-muted\">\r\n                {profile?.avatar_url ? (\r\n                  <img\r\n                    src={profile.avatar_url || \"/placeholder.svg\"}\r\n                    alt=\"Avatar\"\r\n                    className=\"h-full w-full object-cover\"\r\n                  />\r\n                ) : (\r\n                  <div className=\"flex h-full w-full items-center justify-center bg-primary text-primary-foreground\">\r\n                    <User className=\"h-10 w-10\" />\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <label className=\"absolute bottom-0 right-0 flex h-8 w-8 cursor-pointer items-center justify-center rounded-full bg-primary text-primary-foreground shadow-lg hover:bg-primary/90\">\r\n                <Camera className=\"h-4 w-4\" />\r\n                <input type=\"file\" accept=\"image/*\" onChange={handleAvatarChange} className=\"hidden\" />\r\n              </label>\r\n            </div>\r\n            <p className=\"text-sm text-muted-foreground\">Rasm yuklash uchun bosing</p>\r\n          </div>\r\n\r\n          {/* Form */}\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-2\">To'liq ism</label>\r\n              <div className=\"relative\">\r\n                <User className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\r\n                <input\r\n                  type=\"text\"\r\n                  value={fullName}\r\n                  onChange={(e) => setFullName(e.target.value)}\r\n                  className=\"w-full rounded-xl border border-input bg-background py-3 pl-10 pr-4 text-sm focus:border-ring focus:outline-none focus:ring-2 focus:ring-ring/20\"\r\n                  placeholder=\"Ismingizni kiriting\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-2\">Email</label>\r\n              <div className=\"relative\">\r\n                <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\r\n                <input\r\n                  type=\"email\"\r\n                  value={user?.email || \"\"}\r\n                  disabled\r\n                  className=\"w-full rounded-xl border border-input bg-muted py-3 pl-10 pr-4 text-sm text-muted-foreground\"\r\n                />\r\n              </div>\r\n              <p className=\"mt-1 text-xs text-muted-foreground\">Email o'zgartirib bo'lmaydi</p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Save Button */}\r\n          <button\r\n            onClick={handleSave}\r\n            disabled={isSaving || fullName === profile?.full_name}\r\n            className=\"flex w-full items-center justify-center gap-2 rounded-xl bg-primary py-3 font-medium text-primary-foreground transition-colors hover:bg-primary/90 disabled:opacity-50\"\r\n          >\r\n            {isSaving ? (\r\n              <>\r\n                <Loader2 className=\"h-5 w-5 animate-spin\" />\r\n                Saqlanmoqda...\r\n              </>\r\n            ) : saved ? (\r\n              <>\r\n                <Check className=\"h-5 w-5\" />\r\n                Saqlandi!\r\n              </>\r\n            ) : (\r\n              \"Saqlash\"\r\n            )}\r\n          </button>\r\n\r\n          {/* Account Info */}\r\n          <div className=\"rounded-xl bg-muted p-4\">\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              Hisob yaratilgan: {profile?.created_at ? new Date(profile.created_at).toLocaleDateString(\"uz-UZ\") : \"â€”\"}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3723, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/KOMPYUTER_01/v0-nexa-gpt-development/app/chat/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { ChatProvider } from \"@/contexts/chat-context\"\r\nimport { Sidebar } from \"@/components/sidebar\"\r\nimport { ChatArea } from \"@/components/chat-area\"\r\nimport { SearchModal } from \"@/components/search-modal\"\r\nimport { SettingsModal } from \"@/components/settings-modal\"\r\nimport { AccountModal } from \"@/components/account-modal\"\r\nimport { useState, useEffect } from \"react\"\r\nimport { useAuth } from \"@/contexts/auth-context\"\r\nimport { useRouter } from \"next/navigation\"\r\n\r\nexport default function ChatPage() {\r\n  const { user, isLoading } = useAuth()\r\n  const router = useRouter()\r\n  const [showSearch, setShowSearch] = useState(false)\r\n  const [showSettings, setShowSettings] = useState(false)\r\n  const [showAccount, setShowAccount] = useState(false)\r\n  const [sidebarOpen, setSidebarOpen] = useState(true)\r\n\r\n  useEffect(() => {\r\n    if (!isLoading && !user) {\r\n      router.push(\"/login\")\r\n    }\r\n  }, [user, isLoading, router])\r\n\r\n  // Keyboard shortcuts\r\n  useEffect(() => {\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      if ((e.metaKey || e.ctrlKey) && e.key === \"k\") {\r\n        e.preventDefault()\r\n        setShowSearch(true)\r\n      }\r\n      if (e.key === \"Escape\") {\r\n        setShowSearch(false)\r\n        setShowSettings(false)\r\n        setShowAccount(false)\r\n      }\r\n    }\r\n    window.addEventListener(\"keydown\", handleKeyDown)\r\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\r\n  }, [])\r\n\r\n  if (isLoading) {\r\n    return <div className=\"flex h-screen items-center justify-center bg-background\">Loading...</div>\r\n  }\r\n\r\n  return (\r\n    <ChatProvider>\r\n      <div className=\"flex h-[100dvh] overflow-hidden bg-background\">\r\n        <Sidebar\r\n          isOpen={sidebarOpen}\r\n          onToggle={() => setSidebarOpen(!sidebarOpen)}\r\n          onOpenSearch={() => setShowSearch(true)}\r\n          onOpenSettings={() => setShowSettings(true)}\r\n          onOpenAccount={() => setShowAccount(true)}\r\n        />\r\n        <main className=\"flex flex-1 flex-col overflow-hidden\">\r\n          <ChatArea onToggleSidebar={() => setSidebarOpen(!sidebarOpen)} sidebarOpen={sidebarOpen} />\r\n        </main>\r\n\r\n        <SearchModal open={showSearch} onClose={() => setShowSearch(false)} />\r\n        <SettingsModal open={showSettings} onClose={() => setShowSettings(false)} />\r\n        <AccountModal open={showAccount} onClose={() => setShowAccount(false)} />\r\n      </div>\r\n    </ChatProvider>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAVA;;;;;;;;;;AAYe,SAAS;;IACtB,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,IAAA,0IAAO;IACnC,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IACjD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAE/C,IAAA,0KAAS;8BAAC;YACR,IAAI,CAAC,aAAa,CAAC,MAAM;gBACvB,OAAO,IAAI,CAAC;YACd;QACF;6BAAG;QAAC;QAAM;QAAW;KAAO;IAE5B,qBAAqB;IACrB,IAAA,0KAAS;8BAAC;YACR,MAAM;oDAAgB,CAAC;oBACrB,IAAI,CAAC,EAAE,OAAO,IAAI,EAAE,OAAO,KAAK,EAAE,GAAG,KAAK,KAAK;wBAC7C,EAAE,cAAc;wBAChB,cAAc;oBAChB;oBACA,IAAI,EAAE,GAAG,KAAK,UAAU;wBACtB,cAAc;wBACd,gBAAgB;wBAChB,eAAe;oBACjB;gBACF;;YACA,OAAO,gBAAgB,CAAC,WAAW;YACnC;sCAAO,IAAM,OAAO,mBAAmB,CAAC,WAAW;;QACrD;6BAAG,EAAE;IAEL,IAAI,WAAW;QACb,qBAAO,6LAAC;YAAI,WAAU;sBAA0D;;;;;;IAClF;IAEA,qBACE,6LAAC,+IAAY;kBACX,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC,oIAAO;oBACN,QAAQ;oBACR,UAAU,IAAM,eAAe,CAAC;oBAChC,cAAc,IAAM,cAAc;oBAClC,gBAAgB,IAAM,gBAAgB;oBACtC,eAAe,IAAM,eAAe;;;;;;8BAEtC,6LAAC;oBAAK,WAAU;8BACd,cAAA,6LAAC,0IAAQ;wBAAC,iBAAiB,IAAM,eAAe,CAAC;wBAAc,aAAa;;;;;;;;;;;8BAG9E,6LAAC,gJAAW;oBAAC,MAAM;oBAAY,SAAS,IAAM,cAAc;;;;;;8BAC5D,6LAAC,oJAAa;oBAAC,MAAM;oBAAc,SAAS,IAAM,gBAAgB;;;;;;8BAClE,6LAAC,kJAAY;oBAAC,MAAM;oBAAa,SAAS,IAAM,eAAe;;;;;;;;;;;;;;;;;AAIvE;GAvDwB;;QACM,0IAAO;QACpB,kJAAS;;;KAFF"}}]
}