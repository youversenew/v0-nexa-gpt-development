{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/KOMPYUTER_01/v0-nexa-gpt-development/contexts/theme-context.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { createContext, useContext, useEffect, useState, type ReactNode } from \"react\"\r\n\r\ntype Theme = \"light\" | \"dark\"\r\n\r\ninterface ThemeContextType {\r\n  theme: Theme\r\n  toggleTheme: () => void\r\n  setTheme: (theme: Theme) => void\r\n}\r\n\r\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined)\r\n\r\nexport function ThemeProvider({ children }: { children: ReactNode }) {\r\n  const [theme, setThemeState] = useState<Theme>(\"light\")\r\n  const [mounted, setMounted] = useState(false)\r\n\r\n  useEffect(() => {\r\n    setMounted(true)\r\n    const savedTheme = localStorage.getItem(\"nexagpt-theme\") as Theme\r\n    if (savedTheme) {\r\n      setThemeState(savedTheme)\r\n      document.documentElement.classList.toggle(\"dark\", savedTheme === \"dark\")\r\n    } else {\r\n      // Check system preference\r\n      const prefersDark = window.matchMedia(\"(prefers-color-scheme: dark)\").matches\r\n      const systemTheme = prefersDark ? \"dark\" : \"light\"\r\n      setThemeState(systemTheme)\r\n      document.documentElement.classList.toggle(\"dark\", systemTheme === \"dark\")\r\n    }\r\n  }, [])\r\n\r\n  const setTheme = (newTheme: Theme) => {\r\n    setThemeState(newTheme)\r\n    if (typeof window !== \"undefined\") {\r\n      localStorage.setItem(\"nexagpt-theme\", newTheme)\r\n      document.documentElement.classList.toggle(\"dark\", newTheme === \"dark\")\r\n    }\r\n  }\r\n\r\n  const toggleTheme = () => {\r\n    setTheme(theme === \"light\" ? \"dark\" : \"light\")\r\n  }\r\n\r\n  return <ThemeContext.Provider value={{ theme, toggleTheme, setTheme }}>{children}</ThemeContext.Provider>\r\n}\r\n\r\nexport function useTheme() {\r\n  const context = useContext(ThemeContext)\r\n  if (!context) {\r\n    if (typeof window === \"undefined\") {\r\n      return {\r\n        theme: \"light\" as Theme,\r\n        toggleTheme: () => {},\r\n        setTheme: () => {},\r\n      }\r\n    }\r\n    throw new Error(\"useTheme must be used within a ThemeProvider\")\r\n  }\r\n  return context\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AAFA;;;AAYA,MAAM,6BAAe,IAAA,sNAAa,EAA+B;AAE1D,SAAS,cAAc,EAAE,QAAQ,EAA2B;IACjE,MAAM,CAAC,OAAO,cAAc,GAAG,IAAA,iNAAQ,EAAQ;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,WAAW;QACX,MAAM,aAAa,aAAa,OAAO,CAAC;QACxC,IAAI,YAAY;YACd,cAAc;YACd,SAAS,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,eAAe;QACnE,OAAO;YACL,0BAA0B;YAC1B,MAAM,cAAc,OAAO,UAAU,CAAC,gCAAgC,OAAO;YAC7E,MAAM,cAAc,cAAc,SAAS;YAC3C,cAAc;YACd,SAAS,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,gBAAgB;QACpE;IACF,GAAG,EAAE;IAEL,MAAM,WAAW,CAAC;QAChB,cAAc;QACd;;IAIF;IAEA,MAAM,cAAc;QAClB,SAAS,UAAU,UAAU,SAAS;IACxC;IAEA,qBAAO,8OAAC,aAAa,QAAQ;QAAC,OAAO;YAAE;YAAO;YAAa;QAAS;kBAAI;;;;;;AAC1E;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,wCAAmC;YACjC,OAAO;gBACL,OAAO;gBACP,aAAa,KAAO;gBACpB,UAAU,KAAO;YACnB;QACF;;;IAEF;IACA,OAAO;AACT"}},
    {"offset": {"line": 79, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/KOMPYUTER_01/v0-nexa-gpt-development/lib/supabase/client.ts"],"sourcesContent":["// lib/supabase/client.ts\r\nimport { createBrowserClient } from \"@supabase/ssr\";\r\n\r\nlet browserClient: ReturnType<typeof createBrowserClient> | undefined;\r\n\r\nexport function getSupabaseBrowserClient() {\r\n  if (browserClient) {\r\n    return browserClient;\r\n  }\r\n\r\n  const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\n  const supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_DEFAULT_KEY;\r\n\r\n  if (!supabaseUrl || !supabaseKey) {\r\n    throw new Error(\"Supabase URL va PUBLISHABLE KEY .env faylida topilmadi\");\r\n  }\r\n\r\n  browserClient = createBrowserClient(supabaseUrl, supabaseKey);\r\n\r\n  return browserClient;\r\n}"],"names":[],"mappings":"AAAA,yBAAyB;;;;;AACzB;AAAA;;AAEA,IAAI;AAEG,SAAS;IACd,IAAI,eAAe;QACjB,OAAO;IACT;IAEA,MAAM;IACN,MAAM;IAEN;;IAIA,gBAAgB,IAAA,iMAAmB,EAAC,aAAa;IAEjD,OAAO;AACT"}},
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/KOMPYUTER_01/v0-nexa-gpt-development/contexts/auth-context.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport {\r\n  createContext,\r\n  useContext,\r\n  useState,\r\n  useEffect,\r\n  type ReactNode,\r\n  useMemo, // Performance uchun\r\n} from \"react\";\r\nimport { getSupabaseBrowserClient } from \"@/lib/supabase/client\";\r\nimport type { User } from \"@supabase/supabase-js\";\r\nimport type { Profile, UserSettings } from \"@/lib/types\";\r\n\r\ninterface AuthContextType {\r\n  user: User | null;\r\n  profile: Profile | null;\r\n  settings: UserSettings | null;\r\n  isLoading: boolean;\r\n  signIn: (email: string, password: string) => Promise<{ error: string | null }>;\r\n  signUp: (email: string, password: string, fullName: string) => Promise<{ error: string | null }>;\r\n  signOut: () => Promise<void>;\r\n  updateProfile: (data: Partial<Profile>) => Promise<void>;\r\n  updateSettings: (data: Partial<UserSettings>) => Promise<void>;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport function AuthProvider({ children }: { children: ReactNode }) {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [profile, setProfile] = useState<Profile | null>(null);\r\n  const [settings, setSettings] = useState<UserSettings | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  // Clientni bir marta olamiz\r\n  const supabase = useMemo(() => getSupabaseBrowserClient(), []);\r\n\r\n  // Ma'lumotlarni yuklash uchun yordamchi funksiya\r\n  const fetchUserData = async (userId: string) => {\r\n    try {\r\n      const [profileRes, settingsRes] = await Promise.all([\r\n        supabase.from(\"profiles\").select(\"*\").eq(\"id\", userId).single(),\r\n        supabase.from(\"user_settings\").select(\"*\").eq(\"user_id\", userId).single(),\r\n      ]);\r\n\r\n      if (profileRes.data) setProfile(profileRes.data);\r\n      if (settingsRes.data) setSettings(settingsRes.data);\r\n    } catch (error) {\r\n      console.error(\"User data fetch error:\", error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n\r\n    const initializeAuth = async () => {\r\n      try {\r\n        // Enforce max loading time of 5 seconds\r\n        const timeoutPromise = new Promise((_, reject) =>\r\n          setTimeout(() => reject(new Error(\"Auth timeout\")), 5000)\r\n        );\r\n\r\n        // 1. Check current session\r\n        const authPromise = async () => {\r\n          const { data: { user: currentUser } } = await supabase.auth.getUser();\r\n\r\n          if (mounted) {\r\n            setUser(currentUser);\r\n            if (currentUser) {\r\n              await fetchUserData(currentUser.id);\r\n            }\r\n          }\r\n        };\r\n\r\n        await Promise.race([authPromise(), timeoutPromise]);\r\n      } catch (error) {\r\n        console.error(\"Auth initialization error:\", error);\r\n      } finally {\r\n        if (mounted) setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    initializeAuth();\r\n\r\n    // 2. Auth o'zgarishlarini tinglaymiz\r\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(\r\n      async (event: any, session: any) => {\r\n        if (!mounted) return;\r\n\r\n        const currentUser = session?.user ?? null;\r\n        setUser(currentUser);\r\n\r\n        if (currentUser) {\r\n          // Faqat user o'zgarganda qayta yuklash\r\n          if (user?.id !== currentUser.id) {\r\n            await fetchUserData(currentUser.id);\r\n          }\r\n        } else {\r\n          setProfile(null);\r\n          setSettings(null);\r\n          setIsLoading(false); // Logout bo'lganda loadingni o'chirish\r\n        }\r\n      }\r\n    );\r\n\r\n    return () => {\r\n      mounted = false;\r\n      subscription.unsubscribe();\r\n    };\r\n  }, [supabase]); // `user` dependency olib tashlandi, loop bo'lmasligi uchun\r\n\r\n  const signIn = async (email: string, password: string) => {\r\n    const { error } = await supabase.auth.signInWithPassword({ email, password });\r\n    return { error: error?.message || null };\r\n  };\r\n\r\n  const signUp = async (email: string, password: string, fullName: string) => {\r\n    const { error } = await supabase.auth.signUp({\r\n      email,\r\n      password,\r\n      options: {\r\n        data: { full_name: fullName },\r\n        emailRedirectTo:\r\n          process.env.NEXT_PUBLIC_DEV_SUPABASE_REDIRECT_URL ||\r\n          window.location.origin,\r\n      },\r\n    });\r\n    return { error: error?.message || null };\r\n  };\r\n\r\n  const signOut = async () => {\r\n    await supabase.auth.signOut();\r\n    setUser(null);\r\n    setProfile(null);\r\n    setSettings(null);\r\n  };\r\n\r\n  const updateProfile = async (data: Partial<Profile>) => {\r\n    if (!user) return;\r\n    const { data: updated } = await supabase\r\n      .from(\"profiles\")\r\n      .update(data)\r\n      .eq(\"id\", user.id)\r\n      .select()\r\n      .single();\r\n    if (updated) setProfile(updated);\r\n  };\r\n\r\n  const updateSettings = async (data: Partial<UserSettings>) => {\r\n    if (!user) return;\r\n    const { data: updated } = await supabase\r\n      .from(\"user_settings\")\r\n      .update(data)\r\n      .eq(\"user_id\", user.id)\r\n      .select()\r\n      .single();\r\n    if (updated) setSettings(updated);\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        user,\r\n        profile,\r\n        settings,\r\n        isLoading,\r\n        signIn,\r\n        signUp,\r\n        signOut,\r\n        updateProfile,\r\n        updateSettings,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useAuth() {\r\n  const context = useContext(AuthContext);\r\n  if (!context) throw new Error(\"useAuth must be used within an AuthProvider\");\r\n  return context;\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 255, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/KOMPYUTER_01/v0-nexa-gpt-development/lib/i18n.ts"],"sourcesContent":["export const translations = {\r\n  uz: {\r\n    // Common\r\n    newChat: \"Yangi suhbat\",\r\n    search: \"Qidirish\",\r\n    settings: \"Sozlamalar\",\r\n    account: \"Mening hisobim\",\r\n    logout: \"Chiqish\",\r\n    darkMode: \"Qorong'i rejim\",\r\n    lightMode: \"Yorug' rejim\",\r\n    recent: \"So'nggi suhbatlar\",\r\n    moreModules: \"Ko'proq modullar\",\r\n\r\n    // Auth\r\n    login: \"Kirish\",\r\n    signup: \"Ro'yxatdan o'tish\",\r\n    email: \"Email\",\r\n    password: \"Parol\",\r\n    fullName: \"To'liq ism\",\r\n\r\n    // Chat\r\n    typeMessage: \"Xabar yozing...\",\r\n    sending: \"Yuborilmoqda...\",\r\n    thinking: \"O'ylayapman...\",\r\n\r\n    // Actions\r\n    rename: \"Nomini o'zgartirish\",\r\n    delete: \"O'chirish\",\r\n    clearAll: \"Hammasini tozalash\",\r\n    cancel: \"Bekor qilish\",\r\n    save: \"Saqlash\",\r\n    confirm: \"Tasdiqlash\",\r\n\r\n    // Warnings\r\n    deleteWarning: \"Bu suhbatni o'chirishni xohlaysizmi?\",\r\n    clearAllWarning: \"Barcha suhbatlarni o'chirishni xohlaysizmi? Bu amalni qaytarib bo'lmaydi.\",\r\n\r\n    // Modules\r\n    nexagpt: \"NexaGPT\",\r\n    agroAi: \"AgroAi\",\r\n    coderAi: \"CoderAi\",\r\n    weatherAi: \"WeatherAi\",\r\n    healthAi: \"HealthAi\",\r\n\r\n    // Welcome\r\n    examples: \"Misollar\",\r\n    capabilities: \"Imkoniyatlar\",\r\n    limitations: \"Cheklovlar\",\r\n  },\r\n  en: {\r\n    // Common\r\n    newChat: \"New chat\",\r\n    search: \"Search\",\r\n    settings: \"Settings\",\r\n    account: \"My account\",\r\n    logout: \"Log out\",\r\n    darkMode: \"Dark mode\",\r\n    lightMode: \"Light mode\",\r\n    recent: \"Recent\",\r\n    moreModules: \"More modules\",\r\n\r\n    // Auth\r\n    login: \"Login\",\r\n    signup: \"Sign up\",\r\n    email: \"Email\",\r\n    password: \"Password\",\r\n    fullName: \"Full name\",\r\n\r\n    // Chat\r\n    typeMessage: \"Type a message...\",\r\n    sending: \"Sending...\",\r\n    thinking: \"Thinking...\",\r\n\r\n    // Actions\r\n    rename: \"Rename\",\r\n    delete: \"Delete\",\r\n    clearAll: \"Clear all\",\r\n    cancel: \"Cancel\",\r\n    save: \"Save\",\r\n    confirm: \"Confirm\",\r\n\r\n    // Warnings\r\n    deleteWarning: \"Are you sure you want to delete this conversation?\",\r\n    clearAllWarning: \"Are you sure you want to clear all conversations? This action cannot be undone.\",\r\n\r\n    // Modules\r\n    nexagpt: \"NexaGPT\",\r\n    agroAi: \"AgroAi\",\r\n    coderAi: \"CoderAi\",\r\n    weatherAi: \"WeatherAi\",\r\n    healthAi: \"HealthAi\",\r\n\r\n    // Welcome\r\n    examples: \"Examples\",\r\n    capabilities: \"Capabilities\",\r\n    limitations: \"Limitations\",\r\n  },\r\n}\r\n\r\nexport type Language = keyof typeof translations\r\nexport type TranslationKey = keyof typeof translations.uz\r\n"],"names":[],"mappings":";;;;AAAO,MAAM,eAAe;IAC1B,IAAI;QACF,SAAS;QACT,SAAS;QACT,QAAQ;QACR,UAAU;QACV,SAAS;QACT,QAAQ;QACR,UAAU;QACV,WAAW;QACX,QAAQ;QACR,aAAa;QAEb,OAAO;QACP,OAAO;QACP,QAAQ;QACR,OAAO;QACP,UAAU;QACV,UAAU;QAEV,OAAO;QACP,aAAa;QACb,SAAS;QACT,UAAU;QAEV,UAAU;QACV,QAAQ;QACR,QAAQ;QACR,UAAU;QACV,QAAQ;QACR,MAAM;QACN,SAAS;QAET,WAAW;QACX,eAAe;QACf,iBAAiB;QAEjB,UAAU;QACV,SAAS;QACT,QAAQ;QACR,SAAS;QACT,WAAW;QACX,UAAU;QAEV,UAAU;QACV,UAAU;QACV,cAAc;QACd,aAAa;IACf;IACA,IAAI;QACF,SAAS;QACT,SAAS;QACT,QAAQ;QACR,UAAU;QACV,SAAS;QACT,QAAQ;QACR,UAAU;QACV,WAAW;QACX,QAAQ;QACR,aAAa;QAEb,OAAO;QACP,OAAO;QACP,QAAQ;QACR,OAAO;QACP,UAAU;QACV,UAAU;QAEV,OAAO;QACP,aAAa;QACb,SAAS;QACT,UAAU;QAEV,UAAU;QACV,QAAQ;QACR,QAAQ;QACR,UAAU;QACV,QAAQ;QACR,MAAM;QACN,SAAS;QAET,WAAW;QACX,eAAe;QACf,iBAAiB;QAEjB,UAAU;QACV,SAAS;QACT,QAAQ;QACR,SAAS;QACT,WAAW;QACX,UAAU;QAEV,UAAU;QACV,UAAU;QACV,cAAc;QACd,aAAa;IACf;AACF"}},
    {"offset": {"line": 349, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/KOMPYUTER_01/v0-nexa-gpt-development/contexts/language-context.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport {\r\n  createContext,\r\n  useContext,\r\n  useState,\r\n  useEffect,\r\n  type ReactNode,\r\n  useMemo,\r\n} from \"react\";\r\nimport { translations, type Language, type TranslationKey } from \"@/lib/i18n\";\r\nimport { useAuth } from \"./auth-context\";\r\nimport { getSupabaseBrowserClient } from \"@/lib/supabase/client\";\r\n\r\ninterface LanguageContextType {\r\n  language: Language;\r\n  setLanguage: (lang: Language) => void;\r\n  t: (key: TranslationKey) => string;\r\n}\r\n\r\nconst LanguageContext = createContext<LanguageContextType | undefined>(undefined);\r\n\r\nexport function LanguageProvider({ children }: { children: ReactNode }) {\r\n  const [language, setLanguageState] = useState<Language>(\"uz\");\r\n  const { user, isLoading: isAuthLoading } = useAuth();\r\n  const supabase = useMemo(() => getSupabaseBrowserClient(), []);\r\n\r\n  useEffect(() => {\r\n    // Auth yuklanishini kutamiz\r\n    if (!isAuthLoading && user) {\r\n      const loadLanguage = async () => {\r\n        const { data } = await supabase\r\n          .from(\"profiles\")\r\n          .select(\"language\")\r\n          .eq(\"id\", user.id)\r\n          .single();\r\n        if (data?.language) {\r\n          setLanguageState(data.language as Language);\r\n        }\r\n      };\r\n      loadLanguage();\r\n    }\r\n  }, [user, isAuthLoading, supabase]);\r\n\r\n  const setLanguage = async (lang: Language) => {\r\n    setLanguageState(lang);\r\n    if (user) {\r\n      await supabase.from(\"profiles\").update({ language: lang }).eq(\"id\", user.id);\r\n    }\r\n  };\r\n\r\n  const t = (key: TranslationKey): string => {\r\n    return translations[language][key] || translations.uz[key] || key;\r\n  };\r\n\r\n  return (\r\n    <LanguageContext.Provider value={{ language, setLanguage, t }}>\r\n      {children}\r\n    </LanguageContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useLanguage() {\r\n  const context = useContext(LanguageContext);\r\n  if (!context) {\r\n    return {\r\n      language: \"uz\" as Language,\r\n      setLanguage: () => {},\r\n      t: (key: TranslationKey) => translations.uz[key] || key,\r\n    };\r\n  }\r\n  return context;\r\n}"],"names":[],"mappings":";;;;;;;AAEA;AAQA;AACA;AACA;AAZA;;;;;;AAoBA,MAAM,gCAAkB,IAAA,sNAAa,EAAkC;AAEhE,SAAS,iBAAiB,EAAE,QAAQ,EAA2B;IACpE,MAAM,CAAC,UAAU,iBAAiB,GAAG,IAAA,iNAAQ,EAAW;IACxD,MAAM,EAAE,IAAI,EAAE,WAAW,aAAa,EAAE,GAAG,IAAA,uIAAO;IAClD,MAAM,WAAW,IAAA,gNAAO,EAAC,IAAM,IAAA,qJAAwB,KAAI,EAAE;IAE7D,IAAA,kNAAS,EAAC;QACR,4BAA4B;QAC5B,IAAI,CAAC,iBAAiB,MAAM;YAC1B,MAAM,eAAe;gBACnB,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,SACpB,IAAI,CAAC,YACL,MAAM,CAAC,YACP,EAAE,CAAC,MAAM,KAAK,EAAE,EAChB,MAAM;gBACT,IAAI,MAAM,UAAU;oBAClB,iBAAiB,KAAK,QAAQ;gBAChC;YACF;YACA;QACF;IACF,GAAG;QAAC;QAAM;QAAe;KAAS;IAElC,MAAM,cAAc,OAAO;QACzB,iBAAiB;QACjB,IAAI,MAAM;YACR,MAAM,SAAS,IAAI,CAAC,YAAY,MAAM,CAAC;gBAAE,UAAU;YAAK,GAAG,EAAE,CAAC,MAAM,KAAK,EAAE;QAC7E;IACF;IAEA,MAAM,IAAI,CAAC;QACT,OAAO,2HAAY,CAAC,SAAS,CAAC,IAAI,IAAI,2HAAY,CAAC,EAAE,CAAC,IAAI,IAAI;IAChE;IAEA,qBACE,8OAAC,gBAAgB,QAAQ;QAAC,OAAO;YAAE;YAAU;YAAa;QAAE;kBACzD;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,OAAO;YACL,UAAU;YACV,aAAa,KAAO;YACpB,GAAG,CAAC,MAAwB,2HAAY,CAAC,EAAE,CAAC,IAAI,IAAI;QACtD;IACF;IACA,OAAO;AACT"}}]
}